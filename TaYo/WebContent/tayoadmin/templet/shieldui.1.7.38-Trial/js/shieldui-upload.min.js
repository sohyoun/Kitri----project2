/* Shield UI 1.7.38 Trial Version | Copyright 2013-2019 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(a,b,c,d){var e,f,g=b.ui.Widget,h=(b.Class,document),i=a.proxy,j=a.each,k=(a.extend,a.map),l=Math.min,m=Math.max,n=(b.guid,b.iid),o=b.error,p=b.format,q=b.is.defined,r=(b.is["boolean"],b.is.integer,b.is.func,b.is.array,b.is.object,b.is.string,b.support.browser,"disabled"),s="multiple",t="change",u="dragover",v="dragleave",w="drop",x="select",y="remove",z="click",A="error",B="progress",C="abort",D="load",E="upload",F="complete",G="POST",H="pending",I="uploading",J="complete",K="removing",L="error",M={pending:"&#10005;",uploading:"&#10754;",complete:"&#10005;",removing:"&#10754;",error:"&#10005;"},N="shieldUploadIframe",O="sui-upload",P=O+"-target-input",Q=O+"-status",R=O+"-file",S=O+"-xhr",T=O+"-form",U=O+"-iframe";e={cls:d,enabled:!0,async:{enabled:!1,autoUpload:!1,batch:!1,save:{url:d,field:d},remove:{url:d,field:"fileNames",method:G}},multiple:!0,files:{enabled:!0,initial:d,template:"{name} ({size} bytes)"},messages:{drop:"Drop files here to upload",select:"Select files ...",upload:"Upload files"},events:{}},f=g.extend({init:function(){g.fn.init.apply(this,arguments);var b,c,d,e,f,j,k,l=this,m=l.options,n=m.dieOnError,p=m.cls,q=m.messages,x=m.files,y=x.enabled,z=x.initial,A=m.async.enabled;return l._xhr2support=b=!!(new XMLHttpRequest).upload,l._original=d=a(l.element),"input"!=d.prop("tagName").toLowerCase()||"file"!=d.attr("type").toLowerCase()?void o("shieldUpload: Must be initialized from an input with type file.",n):(k=l._eventNS=".shieldUpload"+l.getInstanceId(),d.wrap("<form>").closest("form").get(0).reset(),d.unwrap(),d.removeAttr(r),m.multiple?d.attr(s,s):d.removeAttr(s),l.element=c=d.wrap("<div/>").parent(),c.addClass("sui-upload"+(p?" "+p:"")),l._selectButtonDiv=d.wrap("<div/>").parent().append('<span class="sui-upload-button-text">'+q.select+"</span>").addClass("sui-upload-button"),l._dropFilesDiv=e=l._selectButtonDiv.wrap('<div class="sui-upload-dropfiles"/>').parent(),l._dropText=f=a('<div class="sui-upload-drop">'+q.drop+"</div>").appendTo(e).hide(),y&&(l._fileList=j=a('<ul class="sui-upload-files"/>').appendTo(c).hide()),l._uploadButtonDiv=a('<button class="sui-upload-button sui-upload-button-upload" type="button">'+q.upload+"</button>").appendTo(c).click(i(l._uploadClicked,l)).hide(),d.on(t+k,i(l._fileSelected,l)),A&&b&&(d.on(w+k,i(l._fileChanged,l)),a(h).on(u+k,function(a){a.stopPropagation(),a.preventDefault(),f.show()}).on(v+k,function(a){a.stopPropagation(),a.preventDefault(),f.hide()}).on(w+k,function(a){a.stopPropagation(),a.preventDefault(),f.hide()}),e.on(u,function(){e.addClass("sui-upload-dropfiles-hover")}).on(v,function(){e.removeClass("sui-upload-dropfiles-hover")}).on(w,i(l._fileChanged,l))),y&&z&&z.length>0&&l._addFiles(z,J),void l.enabled(m.enabled))},refresh:function(a){this.refreshWithElement(this._original,a)},_getFiles:function(b){var c,d=[],e=a(b.target);return b.originalEvent.dataTransfer&&b.originalEvent.dataTransfer.files?d=b.originalEvent.dataTransfer.files:b.target.files?d=b.target.files:(d=a.makeArray(e.prop("files")),d.length?!q(d[0].name)&&d[0].fileName&&j(d,function(a,b){b.name=b.fileName,b.size=b.fileSize}):(c=e.prop("value"),d=c?[{name:c.replace(/^.*\\/,"")}]:[])),d},_getPendingFileItems:function(){return a(this._fileList).children("li.sui-upload-file-"+H)},_getFileInfoList:function(b){return this._toFileInfoList(a(b).data(R))},_toFileInfoList:function(a){var b,c=this,d=[];if(c._isFileList(a))for(b=0;b<a.length;b++)d.push(a[b]);else d.push(a);return d},_isSingleFile:function(a){return a&&a.name},_isFileList:function(a){return a.length&&a.length>0},_fileSelected:function(b){var c,d,e=this,f=e.options,g=f.async.enabled,h=e._xhr2support,j=e._eventNS,k=a(b.target),l=e._getFiles(b);d=e.trigger(x,{files:e._toFileInfoList(l)}),d.isDefaultPrevented()||(c=a('<input type="file" name="'+k.attr("name")+'"/>').insertAfter(k).on(t+j,i(e._fileSelected,e)),f.multiple&&c.attr(s,s),g&&h&&c.on(w+j,i(e._fileChanged,e)),k.hide(),e._addFiles(l,H,k))},_fileChanged:function(a){var b,c=this,d=c._getFiles(a);a.stopPropagation(),a.preventDefault(),c._dropText.hide(),c._dropFilesDiv.removeClass("sui-upload-dropfiles-hover"),b=c.trigger(x,{files:c._toFileInfoList(d)}),b.isDefaultPrevented()||c._addFiles(d,H)},_addFiles:function(a,b,c){var d,e=this,f=e.options,g=f.async;if(f.files.enabled){if(g.enabled&&!g.batch||!f.multiple)for(d=0;d<a.length;d++)e._renderFile(a[d],b,c);else e._renderFile(a,b,c);e._afterAddRemoveFiles(),g.autoUpload&&e._uploadAllPending()}},_renderFile:function(b,c,d){var e,f,g=this,h=g.options,j=h.files.template,k=(g._fileList,g._toFileInfoList(b)),l=[];for(e=a('<li class="sui-upload-file"/>').data(R,b).appendTo(g._fileList),d&&e.data(P,d),f=0;f<k.length;f++)l.push(a('<span class="sui-upload-file-text"/>').append(p(j,k[f]))),f<k.length-1&&l.push(a('<span class="sui-upload-file-text-sep">,</span>'));h.async.enabled&&g._xhr2support?l.push(a('<span class="sui-upload-file-progress"/>')):e.addClass("sui-upload-file-no-progress"),l.push(a('<span class="sui-upload-file-action"/>').on(z,i(g._actionClicked,g,e))),e.append(l),g._setStatus(e,c),c===J&&g._setProgress(e,100)},_afterAddRemoveFiles:function(){var a=this,b=a.options.async,c=a._fileList,d=a._uploadButtonDiv;c.children("li").length>0?c.show():c.hide(),a._getPendingFileItems().length>0?b.enabled&&!b.autoUpload&&d.show():d.hide()},_actionClicked:function(a,b){var c=this,d=c._getStatus(a);c._enabled&&(d==I?c._abortUpload(a,b):d==K?c._abortRemove(a,b):c._removeItem(a,b))},_removeItem:function(b,c){var d,e,f=this,g=(f.options,f.options.async),h=g.remove,i=f._getStatus(b),j=f._getFileInfoList(b),l=b.data(P),m=f._eventNS,n={};e=f.trigger(y,{domEvent:c,status:i,files:j}),e.isDefaultPrevented()||(d=function(){a(l)[0]===a(f._original)[0]?a(l).hide().attr(r,r):a(l).off(m).remove(),a(b).off(m).remove(),f._afterAddRemoveFiles()},i==H||i==L?d():i==J&&(g.enabled?(f._setStatus(b,K),n[h.field]=k(j,function(a){return a.name}),a.support.cors=!0,a.ajax({method:h.method,url:h.url,traditional:!0,data:n}).done(function(a,b,c){d()}).fail(function(a,d,g){f.trigger(A,{domEvent:c,operation:y,listItem:b,files:j,jqXHR:a,textStatus:d,errorThrown:g,responseText:g});e.isDefaultPrevented()||f._setStatus(b,L)})):d()))},_abortRemove:function(a,b){},_setStatus:function(b,c){a(b).data(Q,c).removeClass("sui-upload-file-pending sui-upload-file-uploading sui-upload-file-complete sui-upload-file-removing sui-upload-file-error").addClass("sui-upload-file-"+c).children(".sui-upload-file-action").first().html(M[c]),this._afterAddRemoveFiles()},_getStatus:function(b){return a(b).data(Q)},_uploadAllPending:function(){var b,c,d,e=this,f=e.options,g=(f.async,e._getPendingFileItems()),h=(g||[]).length,i=[];if(!(h<1)){for(d=0;d<h;d++)b=a(g[d]).data(R),e._isSingleFile(b)?i.push(b):e._isFileList(b)&&(i=i.concat(b));if(c=e.trigger(E,{files:i}),!c.isDefaultPrevented())for(d=0;d<h;d++)e._startUpload(g[d])}},_startUpload:function(b){var c,d,e,f,g,j,k,l=this,m=l.options,o=m.async,p=o.save,r=p.field,s=l._getFileInfoList(b);if(q(r)||(r=a(l._original).attr("name")),l._setProgress(b,0),l._xhr2support){for(d=new FormData,e=new XMLHttpRequest,k=0;k<s.length;k++)d.append(r,s[k]);a(b).data(S,e),e.open(G,p.url),e.upload.addEventListener(B,i(l._onUploadProgress,l,b)),e.upload.addEventListener(D,i(l._onUploadComplete,l,b)),e.upload.addEventListener(A,i(l._onUploadError,l,b)),e.onreadystatechange=function(){4==e.readyState&&200!=e.status&&l._onUploadError(b)},e.send(d)}else c=a(b).data(P),c&&(f=N+n(),g=a('<iframe name="'+f+'" id="'+f+'" class="sui-upload-iframe" width="0" height="0" tabindex="-1"/>').appendTo(h.body),a(g).on(D,i(l._onIframeComplete,l,b)),j=a('<form class="sui-upload-form" method="'+G+'" enctype="multipart/form-data" action="'+p.url+'" target="'+f+'" tabindex="-1"/>').appendTo(h.body).append(c),a(b).data(U,g).data(T,j),j.get(0).submit());l._setStatus(b,I)},_abortUpload:function(b,c){var d,e=this;e._xhr2support?(d=a(b).data(S),d&&d.abort(),a(b).removeData(S)):e._cleanupIframeForm(b),e._setStatus(b,H),e._setProgress(b,0),e.trigger(C,{listItem:b,files:e._getFileInfoList(b)})},_cleanupIframeForm:function(b){var c=this,d=a(b).data(U),e=a(b).data(T),f=a(b).data(P);d&&a(d).attr("src","about:blank"),e&&(f&&a(f).prependTo(c._selectButtonDiv),a(e).remove(),a(b).removeData(T)),d&&(a(d).remove(),a(b).removeData(U))},_setProgress:function(b,c){var d=a(b).children(".sui-upload-file-progress").first();d&&d.length>0&&d.empty().append(a('<span class="sui-upload-file-progress-inner"/>').css("width",c+"%"))},_onUploadProgress:function(a,b){var c=this,e=b.lengthComputable?l(100,m(0,b.loaded/b.total*100)):d;q(e)&&c._setProgress(a,e),c.trigger(B,{domEvent:b,percentage:e,listItem:a,files:c._getFileInfoList(a)})},_onUploadComplete:function(b){var c=this;c._setStatus(b,J),c._setProgress(b,100),a(b).removeData(S),c.trigger(F,{listItem:b,files:c._getFileInfoList(b)})},_onIframeComplete:function(b,c){var e,f=this,g=a(b).data(U),h=f._getFileInfoList(b),i="";if(g){try{i=a(g).contents().find("body").html()}catch(j){i=j?j.description||j.message:""}i?(e=f.trigger(A,{domEvent:c,operation:E,listItem:b,files:h,status:d,responseText:i}),e.isDefaultPrevented()||(f._setStatus(b,L),f._setProgress(b,0))):(f._setStatus(b,J),f._setProgress(b,100),f.trigger(F,{listItem:b,files:h})),f._cleanupIframeForm(b)}},_onUploadError:function(b,c){var d,e,f,g,h,i=this,j=i._getStatus(b),k=a(b).data(S);j!==L&&(k&&(d=k.readyState,e=k.status,f=k.responseText,g=k.statusText),a(b).removeData(S),h=i.trigger(A,{domEvent:c,operation:E,listItem:b,files:i._getFileInfoList(b),status:e,responseText:f}),h.isDefaultPrevented()||(i._setStatus(b,L),i._setProgress(b,0)))},_uploadClicked:function(a){var b=this;b._enabled&&b._uploadAllPending()},enabled:function(){var b,c,d=this,e=a(d.element),f=[].slice.call(arguments);return f.length>0?(b=!!f[0],c=e.find('input[type="file"]').filter(":visible"),b?(e.removeAttr(r).removeClass("sui-upload-disabled"),a(c).removeAttr(r)):(e.attr(r,r).addClass("sui-upload-disabled"),a(c).attr(r,r)),d._enabled=b,void 0):d._enabled},destroy:function(){var b=this,c=a(b.element),d=a(b._original),e=b._eventNS;a(h).off(e),a(c).find('input[type="file"]').off(e),a(c).find('input[type="file"]').not(d).remove(),b._uploadButtonDiv&&(a(b._uploadButtonDiv).remove(),b._uploadButtonDiv=null),b._dropText&&(a(b._dropText).remove(),b._dropText=null),b._fileList&&(a(b._fileList).remove(),b._fileList=null),a(c).find(".sui-upload-button-text").remove(),a(d).unwrap(),a(d).unwrap(),a(d).unwrap(),b._selectButtonDiv=b._dropFilesDiv=null,a(d).removeAttr(r).show(),g.fn.destroy.call(b)}}),f.defaults=e,b.ui.plugin("Upload",f)}(jQuery,shield,this);