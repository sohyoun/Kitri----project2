/* Shield UI 1.7.38 Trial Version | Copyright 2013-2019 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(a,b,c,d){function e(a){var b,c=" ";if(a){if(w(a))return a;for(b in a)a.hasOwnProperty(b)&&(c+=b+'="'+a[b]+'"')}return c}function f(b,c){var d=a(b).attr(c);return z(d)&&d!==!1}function g(){var b,c,d,e,f=[].slice.call(arguments),g=f.shift();for(e=0;e<f.length&&(b=a(g.target).closest(".sui-cell",f[e]),!b.length);e++);return b.length?(c=b[0].parentNode,d=b[0],null==c||null==d?null:{row:c,cell:d}):null}function h(b){return b&&(a(b.row).hasClass(ba)||a(b.cell).hasClass(ba))}function i(b,c){return a(b.target).closest(".sui-cell",c).length>0}function j(b){var c=a(b).find('.sui-checkbox:not(.sui-checkbox-disabled), .sui-radiobutton:not(.sui-radiobutton-disabled), .sui-input:not(.sui-input-disabled), .sui-combobox:not(.sui-combobox-disabled), .sui-dropdown:not(.sui-dropdown-disabled), .sui-listbox:not(.sui-listbox-disabled), .sui-switch:not(.sui-switch-disabled), a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex]:not([tabindex="-1"]), *[contenteditable]').filter(":visible").first();a(c).length>0&&a(c).focus()}var k,l=b.ui.Widget,m=b.Class,n=b.DataSource,o=b.format,p=b.support,q=b.exp,r=b.get,s=b.iid,t=(b.strid,b.Constants.KeyCode),u=b.is,v=u.func,w=u.string,x=u.object,y=u["boolean"],z=u.defined,A=u.number,B=u.undefined,C=u["null"],D=b.to["int"],E=document,F=Math.abs,G=Math.min,H=Math.max,I=a.each,J=a.proxy,K=a.extend,L=a.map,M=a.grep,N=a.inArray,O=navigator.userAgent,P=c.opera,Q=/msie/i.test(O)&&!P,R=Q&&7===E.documentMode,S=Q&&8===E.documentMode,T=(Q&&10===E.documentMode,8===E.documentMode,/AppleWebKit/.test(O)),U=(/Firefox/.test(O),"role"),V="aria-sort",W="aria-readonly",X="ascending",Y="descending",Z="tabindex",$="true",_="height",aa="sui-selectable",ba="sui-selected",ca="change",da="focus",ea="start",fa="scroll",ga="command",ha="selectionChanging",ia="selectionChanged",ja="selectstart",ka="dataBound",la="virtualRowsLoaded",ma="keydown",na="mousedown",oa="mousemove",pa="mouseup",qa="resize",ra="click",sa="dblclick",ta="sort",ua="detailCreated",va="columnReorder",wa="columnResize",xa="groupsReorder",ya="group",za="ungroup",Aa="editorCreating",Ba="filterWidgetCreating",Ca="getCustomFilterValue",Da="clearFilter",Ea="expandButtonCreate",Fa="cancel",Ga="edit",Ha="insert",Ia="save",Ja="delete",Ka="error",La="collapse",Ma="expand",Na="editWindowOpen",Oa="insertWindowOpen",Pa="display",Qa="none",Ra="@@custom",Sa="row",Ta="sui-viewindex",Ua="sui-fieldname";k={columns:[],rowHover:!0,scrolling:!1,paging:!1,columnReorder:!1,showHeader:!0,grouping:{showGroupHeader:!1,allowDragToGroup:!1,message:"Drag a column header here to group by a column"}};var Va=m.extend({init:function(b,c){var d,e,f,g,h,i=this;for(i._grid=c,h=0;h<b.length;h++)d=b[h],e=d.position?d.position:"top",f=a('<div class="sui-toolbar"/>'),"top"===e?(g=c.element.find(".sui-toolbar"),g.length>0?a(g[0]).after(f):c.element.prepend(f)):(f.addClass("sui-toolbar-bottom"),f.appendTo(c.element)),d.template?i._initializeTemplate(d,f):d.buttons.length>0&&i._buildButtons(f,d)},_buildButtons:function(a,b){var c,d=this,e=b.buttons;for(c=0;c<e.length;c++)d._buildButton(e[c],a)},_buildButton:function(c,d){var e,f,g=this,h=c.commandName,i=c.click;b.ui.Button&&(e=a('<button type="button">'+c.caption+"</button>").appendTo(d),"insert"==h?i=g._insertButtonClicked:"save"==h?i=g._saveButtonClicked:"cancel"==h?i=g._cancelButtonClicked:"excel"==h?i=g._excelButtonClicked:"pdf"==h?i=g._pdfButtonClicked:"csv"==h&&(i=g._csvButtonClicked),f=new b.ui.Button(e,{cls:c.cls,events:{click:J(i,g._grid)}}))},_excelButtonClicked:function(){this._doExcelExport()},_pdfButtonClicked:function(){this._doPdfExport()},_csvButtonClicked:function(){this._doCsvExport()},_insertButtonClicked:function(a,b){var c,d,e,f,g,h=this,i=h.options,j=i.editing.insertNewRowAt,k=h.dataSource,l=!1;if(b||(f=h.trigger(ga,{commandName:Ha,cancel:!1}),!f.cancel)){if(k.sort&&k.sort.length>0)return k.sort=[],h._sortingInProgress=!0,h.pager&&(k.skip=0,k.take=h.pager.pageSize(),h.pager.refresh(!0)),void k.read().always(J(h._toolbar._insertButtonClicked,h,a,!0));h._editingInProcess=!0,"pagebottom"===j?(e=H(0,h.contentTable.find(">tbody > tr").length-1),(!i.paging||h.pager&&!h.pager.hasNext())&&(e+=1,l=!0)):e=0,c=l?k.add({}):k.insertView(e,{});for(g in c.fields)c.fields.hasOwnProperty(g)&&(c.data[g]=null);h._editing._insertedItems.push(c),d=h.contentTable.find(">tbody > tr").eq(e),"popup"!=h.options.editing.mode?h._editing._putRowInEditMode(d,0):h._initializePopupForm(0,!0),h.trigger(Ha)}},_saveButtonClicked:function(a){var b,c,d=this,e=d.contentTable.find(">tbody > tr > .sui-editable-cell");return e.length>0&&(b=e.get(0).parentNode.rowIndex,d._updateItem(b,null),d._errorDuringEdit)?void(d._errorDuringEdit=!1):(c=d.trigger(ga,{commandName:Ia,cancel:!1}),void(c.cancel||(d.dataSource.save(),d.trigger(Ia))))},_cancelButtonClicked:function(a){var b=this,c=b.trigger(ga,{commandName:Fa,cancel:!1});c.cancel||(b.dataSource.cancel(),b.trigger(Fa))},_initializeTemplate:function(a,b){var c=this,d=a.template;if(v(d)){var e=d.call(c._grid,b);z(e)&&!C(e)&&""!==e&&b.html(e)}else b.html(d)},destroy:function(){}}),Wa=m.extend({init:function(a,b){var c=this;c._grid=b,c.options=a,c._eventNS=".shieldGridEditing"+s(),c._editors={},c._insertedItems=[],a.enabled&&c._initEditing(),c._grid.dataSource.on(Ka+c._eventNS,J(c._dsError,c))},_dsError:function(a){var b=this,c=b._editors[a.path];b._grid.trigger(Ka,{type:a.type,path:a.path,value:a.value,editor:c,reason:a.reason}),b._errorDuringEdit=!0},_initEditing:function(){var b=this,c=b.options,d=c.event,e=b._eventNS;B(d)||(d===ra?b._grid.element.on(ra+e,".sui-cell",J(b._editingTriggered,b)):"doubleclick"===d&&b._grid.element.on(sa+e,".sui-cell",J(b._editingTriggered,b)),a(E).on(ra+e,J(b._documentClicked,b)))},_editingTriggered:function(c){var d,e,f=this,g=f._grid,h=c.target,i=a(h).parent(),j=i.get(0).rowIndex,k=g._getRowIndex(i),l=f.options,m=l.mode,n=l.type,o=g.dataSource,p=l.batch,q=g.trigger(ga,{commandName:Ga,cancel:!1,row:i,cell:h,index:k}),r=!1;if(!q.cancel){if(p){if(d=g.contentTable.find(">tbody > tr > .sui-editable-cell"),d.length>0){if(j=d.get(0).parentNode.rowIndex,"TR"!==i.get(0).nodeName.toUpperCase()||i.get(0).rowIndex==j&&n==Sa)return;var s=g._updateItem(j,h);if(f._errorDuringEdit)return f._errorDuringEdit=!1,void(s=null);e=i.get(0).rowIndex,g._putRowInViewMode(j,null),!g._populateInsertedItem&&s&&s.length>0&&g._renderUpdateMarkers(s,j),g._populateInsertedItem=!1,e===j&&(h=g.contentTable.find(">tbody > tr").eq(j).get(0).cells[h.cellIndex]),j=e}B(n)||"cell"===n?(f._putCellInEditMode(h),r=!0):n===Sa?(f._putRowInEditMode(i,h.cellIndex),r=!0):b.error("Invalid editing.type declaration. The editing.type must be 'row' or 'cell'.",l.dieOnError)}else if(o.tracker&&o.tracker.changes&&o.tracker.changes.added&&o.tracker.changes.added.length>0)"TR"!==i.get(0).nodeName.toUpperCase()||i.get(0).rowIndex==j&&n==Sa||o.cancel();else if(B(m)||"inline"===m){if(d=g.contentTable.find(">tbody > tr > .sui-editable-cell"),d.length>0){if(j=d.get(0).parentNode.rowIndex,"TR"!==i.get(0).nodeName.toUpperCase()||i.get(0).rowIndex==j&&n==Sa)return;if(g._updateItem(j,h),f._errorDuringEdit)return void(f._errorDuringEdit=!1);e=i.get(0).rowIndex,g._closeAllEditedRows(),e===j&&(h=g.contentTable.find(">tbody > tr").eq(j).get(0).cells[h.cellIndex]),j=e}B(n)||"cell"==n?(f._putCellInEditMode(h),r=!0):n==Sa?(f._putRowInEditMode(i,h.cellIndex),r=!0):b.error("Invalid editing.type declaration. The editing.type must be 'row' or 'cell'.",l.dieOnError)}r&&(c.preventDefault(),c.stopPropagation(),g.trigger(Ga,{row:i,cell:h,index:k}))}},_documentClicked:function(b){var c,d,e=this,f=e.options,g=f.batch,h=(f.type,f.event),i=a(b.target);if(e._grid._editingInProcess||e._grid._preventClosingEditors)return void(e._grid._editingInProcess=!1);if((!i.hasClass("sui-cell")&&!i.parents().hasClass("sui-cell")&&!i.parents().hasClass("sui-calendar")&&!i.parents().hasClass("sui-listbox")||"doubleclick"===h&&b.type===ra&&i.closest(".sui-editable-cell").length<=0)&&(c=e._grid.contentTable.find(">tbody > tr > .sui-editable-cell"),c.length>0)){d=c.get(0).parentNode.rowIndex;var j=e._grid._updateItem(d,null);if(e._errorDuringEdit)return void(e._errorDuringEdit=!1);e._grid._putRowInViewMode(d,null),g&&!e._grid._populateInsertedItem&&j&&j.length>0&&e._grid._renderUpdateMarkers(j,d),e._grid._populateInsertedItem=!1}},_getColumnIndex:function(b){return b.cellIndex-a(b.parentNode).find(".sui-indent-cell, .sui-expand-cell, .sui-expand-cell-disabled, .sui-collapse-cell").length},_putCellInEditMode:function(b){var c,d=this,e=d._getColumnIndex(b),f=d._grid,g=f.dataSource,h=f._getRowIndex(a(b).parent()),i=f.columns[e],j=!1;if(i&&i.field&&i.editable!==!1)if(c=g.editView(h).data,arguments.length>1?arguments[1]==e&&(j=!0):j=!0,i.editor)d._instantiateCustomEditor(i,b,c,h,j);else{var k=z(g.schema.options.fields)?g.schema.options.fields[i.field].type:String,l=r(c,i.field);switch(k){case Number:d._instantiateNumeric(b,l,j);break;case Date:d._instantiateDatePicker(b,l,j);break;case String:d._instantiateTextBox(b,l,j);break;case Boolean:d._instantiateCheckBox(b,l,j)}}},_prepareCell:function(b){a(b).empty().addClass("sui-editable-cell")},_instantiateCustomEditor:function(b,c,d,e,f,g){var h,i,j,k=this;g?i=g:(h=k._getColumnIndex(c),i=k._grid.columns[h].field,k._prepareCell(c)),j=b.editor.call(k._grid,c,d,e,f),a(c).html(j),k._editors[i]="custom"},_instantiateNumeric:function(c,d,e,f){var g,h,i,j,k=this;f?j=f:(i=k._getColumnIndex(c),j=k._grid.columns[i].field,k._prepareCell(c)),h=a('<input name="'+j+'"/>'),h.appendTo(c);var l=k._grid.trigger(Aa,{field:j,options:{}}),m=K({},l.options,{value:d});b.ui.NumericTextBox&&(g=new b.ui.NumericTextBox(h,m),e&&g.focus(),k._editors[j]=g)},_instantiateDatePicker:function(c,d,e,f){var g,h,i,j,k=this;f?j=f:(i=k._getColumnIndex(c),j=k._grid.columns[i].field,k._prepareCell(c)),h=a('<input name="'+j+'"/>'),h.appendTo(c);var l=k._grid.trigger(Aa,{field:j,options:{}}),m=K({},l.options,{value:d});b.ui.DatePicker&&(g=new b.ui.DatePicker(h,m),e&&g.focus(),k._editors[j]=g)},_instantiateTextBox:function(c,d,e,f){var g,h,i,j,k=this;f?j=f:(i=k._getColumnIndex(c),j=k._grid.columns[i].field,k._prepareCell(c)),h=a('<input type="text" name="'+j+'"/>'),h.appendTo(c);var l=k._grid.trigger(Aa,{field:j,options:{}}),m=K({},l.options,{value:d,cls:"sui-input-textbox"});b.ui.TextBox&&(g=new b.ui.TextBox(h,m),e&&g.focus(),k._editors[j]=g)},_instantiateCheckBox:function(c,d,e,f){var g,h,i,j,k=this;f?j=f:(i=k._getColumnIndex(c),j=k._grid.columns[i].field,k._prepareCell(c)),h=a('<input type="checkbox" name="'+j+'"/>'),h.appendTo(c);var l=k._grid.trigger(Aa,{field:j,options:{}}),m=K({},l.options,{value:d});b.ui.CheckBox&&(g=new b.ui.CheckBox(h,m),e&&g.focus(),g.checked(d),k._editors[j]=g)},_putRowInEditMode:function(b,c){var d,e,f=this,g=b.find(".sui-cell");for(e=0;e<g.length;e++)f._putCellInEditMode(g[e],c-b.find(".sui-indent-cell, .sui-expand-cell, .sui-expand-cell-disabled, .sui-collapse-cell").length);d=b.find(".sui-edit"),d.length>0&&f._grid._changeEditColumnButtons(b.get(0).rowIndex,a(b.children(".sui-button-cell")[0]))},_destroyRow:function(a){var b,c,d=this,e=d._grid,f=e.contentTable.find(">tbody > tr").eq(a),g=e.columns;for(b=0;b<g.length;b++)c=d._editors[g[b].field],c&&(v(c.destroy)&&d._editors[g[b].field].destroy(),delete d._editors[g[b].field]);f.remove()},destroy:function(){var b,c,d=this,e=d._eventNS;if(d._grid.dataSource.off(Ka+e),d._grid.element.off(e,".sui-cell"),a(E).off(ra+e),d._editors)for(b=0;b<d._editors.length;b++)c=d._editors[b].editor.element(),d._editors[b].editor.destroy(),c.remove();d._errorDuringEdit=d.options=null}}),Xa=m.extend({init:function(a){var b=this;w(a)?(b.field=a,b.title=b.field,b.groupTitle=b.title,b.groupHeaderTitle=b.title,b.resizable=!0,b.sortable=!0,b.filterable=!0,b.editable=!0,b.visible=!0,b.locked=!1):x(a)&&(b.field=a.field,b.title=a.title,b.groupTitle=z(a.groupTitle)?a.groupTitle:b.title,b.groupHeaderTitle=z(a.groupHeaderTitle)?a.groupHeaderTitle:b.title,b.format=a.format,b.width=a.width,b.minWidth=a.minWidth,b.maxWidth=a.maxWidth,b.resizable=!z(a.resizable)||!!a.resizable,b.attributes=a.attributes,b.headerAttributes=a.headerAttributes,b.headerTemplate=a.headerTemplate,b.columnTemplate=a.columnTemplate,b.footerTemplate=a.footerTemplate,b.groupFooterTemplate=a.groupFooterTemplate,b.buttons=a.buttons,b.editor=a.editor,b.customFilter=a.customFilter,b.sortable=!z(a.sortable)||!!a.sortable,b.filterable=!z(a.filterable)||!!a.filterable,b.editable=!z(a.editable)||!!a.editable,b.visible=!z(a.visible)||!!a.visible,b.locked=!!b.visible&&!!a.locked)},destroy:function(){var a=this;a.field=a.buttons=a.title=a.editor=a.editable=a.format=a.width=a.minWidth=a.maxWidth=a.resizable=a.attributes=a.headerAttributes=a.headerTemplate=a.buttons=a.customFilter=a.footerTemplate=a.groupFooterTemplate=a.sortable=a.filterable=a.visible=a.locked=a.columnTemplate=null}}),Ya=m.extend({options:{ns:".shieldGridColumnResizing",width:12,offset:6,min:12},init:function(a){var b=this;b.grid=a,b.options=K(!0,{},Ya.fn.options),b._eventNS=b.options.ns+s(),a.headerTable.on(oa+b._eventNS,".sui-headercell",J(b._showHandle,b))},_showHandle:function(b){if(!this.resizing){var c=this,d=c.options,e=(c.grid,c.handle),f=b.pageX,g=c.params=c._params(a(b.currentTarget)),h=f>=g.offset.left&&f<=g.offset.left+d.offset&&g.headerIndex>0;g.isRtl&&(h=f>=g.offset.left+g.width-d.offset&&f<=g.offset.left+g.width&&g.headerIndex>0),h&&(g=c.params=c._params(g.header.prev())),g.column&&g.column.resizable&&!g.column.locked&&(f>=g.threshold&&f<=g.edge+d.offset?(e||(e=c.handle=a('<div class="sui-resizable-handle"/>').on(na+c._eventNS,J(c._down,c)).appendTo(g.header.parents(".sui-headercontent"))),e.css({top:g.position.top,left:e.parent()[0].scrollLeft+g.handleLeft,width:d.width,height:g.height}).show()):e&&e.hide())}},_params:function(a){var b=this,c=b.options,d=a.offset(),e=a.position(),f=p.isRtl(b.grid.element),g=a.outerWidth(),h=d.left+(f?c.width:g),i=a.index(),j=b.grid._getColumnByField(a.attr("data-field")),k=j?j.minWidth>=0?+j.minWidth:c.min:null,l=j&&j.maxWidth>=k?+j.maxWidth:null;return{header:a,headerIndex:i,column:j,min:k,max:l,offset:d,isRtl:f,width:g,current:g,height:a.outerHeight(),edge:h,threshold:h-c.width+(f?-1:1)*c.offset,position:e,handleLeft:e.left+(f?c.width:g)-c.width+(f?-1:1)*c.offset}},_down:function(c){var d,e=this,f=e.grid,g=e.params;if(!(c.button>1)&&g)return d="> colgroup col:nth-child("+(g.headerIndex+1)+")",g.origin=c.pageX,g.cols=a().add(f.headerTable.find(d)).add(f.contentTable.find(d)),e.resizing=!0,e._cancelled=null,e.handle.hide(),a(E).on(oa+e._eventNS,J(e._move,e)).on(pa+e._eventNS,J(e._up,e)),b.selection(!1),!1},_move:function(a){var b,c,d,e=this,f=e.params;if(e.resizing)return b=(f.isRtl?-1:1)*(a.pageX-f.origin),c=H(f.width+b,f.min),f.max&&(c=G(c,f.max)),d=e.grid.trigger(ga,{commandName:wa,cancel:!1,field:f.column.field,width:c}),d&&d.cancel?void(e._cancelled=!0):void(c!==f.current&&(f.cols.width(f.current=c),e.grid._fixHeaderPadding(),e.grid._adjustHeightsLocked(!0)))},_up:function(){var c=this,d=c.grid,e=c.params,f=e.current,g=e.column||{},h=(d.options.columns||[])[a(d.columns).index(g)]||{};c.resizing=!1,c.params=null,g.width=h.width=f+"px",a(E).off(c._eventNS),b.selection(!0),c._cancelled!==!0&&d.trigger(wa,{field:g.field,width:f}),c._cancelled=null},destroy:function(){var a=this;a.grid.headerTable.off(a._eventNS),a._cancelled=null,a.handle&&(a.handle.off(a._eventNS).remove(),a.handle=null)}}),Za=m.extend({init:function(a){var b=this;b.grid=a,b._filters={},b._eventNS=".shieldGridFiltering"+s(),b._createFilterRow()},_createFilterRow:function(){var b,c,d,e,f,g,h=this,i=h.grid,j=i.headerTable,k=j.find(">thead"),l=k.find(".sui-indent-cell").length,m=i.dataSource.schema,n=i.columns;for(h._tr=b=a('<tr class="sui-filter-row"/>'),g=0;g<l;g++)a('<th class="sui-indent-cell"/>').appendTo(b);for(m&&m.options.fields&&(f=m.options.fields),g=0;g<n.length;g++)c=f&&f[n[g].field]?f[n[g].field].type:null,d=n[g].field?n[g].field.replace(/[\"\']/g,"@"):"",e=a('<th class="sui-filter-cell" data-field="'+d+'" role="gridcell" tabindex="-1"/>').appendTo(b),n[g].filterable!==!1&&d.length>0&&(h._initializeEditor(e,c,n[g].field,n[g]),h._appendFilterButton(e));for(b.appendTo(k),a(E).on(ra+h._eventNS,J(h._documentClicked,h)),g=0;g<n.length;g++)if(d=n[g].field?n[g].field.replace(/[\"\']/g,"@"):"",n[g].filterable!==!1&&d.length>0){var o=h._getFilter(n[g].field);o&&(h._setEditorValue(n[g].field,n[g],o.value),h._addRemoveFilterButton(n[g].field))}},_documentClicked:function(b){var c,d,e=this;if(e.listBox&&!a(b.target).hasClass("sui-filter-button")&&!a(b.target).hasClass("sui-filter-button-content")){var f=e.listBox.element.parent();if(f.css(Pa)==Qa)return;e._filterByField=null,c=f.height(),d=f.offset().top,e._slideUp?f.animate({height:0,top:d+c},150,function(){f.css({display:Qa,height:c})}):f.animate({height:0},150,function(){f.css({display:Qa,height:c})})}},_appendFilterButton:function(c){if(b.ui.Button){var d=a('<button type="button"><span class="sui-sprite sui-filter-button-content"/></button>').appendTo(c);new b.ui.Button(d,{cls:"sui-filter-button",events:{click:J(this._filterButtonClicked,this)}})}},_filterButtonClicked:function(c){var d,e,f,g=this,h=g.grid,i=h.dataSource.schema,j=h.options.filtering,k=j.stringFunc?j.stringFunc:[{func:"eq",name:"Equal to"},{func:"neq",name:"Not equal to"},{func:"con",name:"Contains"},{func:"notcon",name:"Not contains"},{func:"starts",name:"Starts with"},{func:"ends",name:"Ends with"},{func:"gt",name:"Greater than"},{func:"lt",name:"Less than"},{func:"gte",name:"Greater than or equal"},{func:"lte",name:"Less than or equal"},{func:"isnull",name:"Is null"},{func:"notnull",name:"Is not null"}],l=j.nonStingFunc?j.nonStingFunc:[{func:"eq",name:"Equal to"},{func:"neq",name:"Not equal to"},{func:"gt",name:"Greater than"},{func:"lt",name:"Less than"},{func:"gte",name:"Greater than or equal"},{func:"lte",name:"Less than or equal"},{func:"isnull",name:"Is null"},{func:"notnull",name:"Is not null"}],m=c.target.element.parent().attr("data-field").replace(/[@]/g,"'");if(g._filterByField=m,i&&i.options.fields){var n=i.options.fields;d=n&&n[m]&&n[m].type===String?k:l}else d=k;b.ui.ListBox&&(g.listBox||(g._menuWrapper=a('<div style="display:none;"/>').appendTo(E.body),g.listBox=new b.ui.ListBox(g._menuWrapper,K({},{},{dataSource:{data:d},textTemplate:"{name}",valueTemplate:"{func}",multiple:!1,width:150,maxHeight:300,events:{select:J(g._selectFilterFunction,g)}})),g.grid.element.parent().hasClass("sui-rtl")?g.listBox.element.parent().addClass("sui-rtl"):g.listBox.element.parent().css(Pa,Qa)),e=g.listBox.element.parent().height(),g._positionListBox(c),g._slideUp?(f=c.target.element.offset().top-e,g.listBox.element.parent().css({top:c.target.element.offset().top}),g.listBox.element.parent().animate({height:e,top:f-g.listBox.element.parent().innerHeight()},150)):g.listBox.element.parent().animate({height:e},150)),g._selectFilterMenuValue(m)},_getFilter:function(a){var b,c,d,e=this,f=e.grid.dataSource.filter;if(f&&f.and&&f.and.length>0)for(b=f.and,d=0;d<b.length;d++)b[d].path===a&&(c=b[d]);return c},_selectFilterMenuValue:function(a){var b=this,c=b._getFilter(a),e=c?c.filter:d;e?b.listBox.values(e):b.listBox.clearSelection()},_selectFilterFunction:function(a){var b,c,d=this,e=!0,f=d._filters[d._filterByField]==Ra?Ra:d._filters[d._filterByField].value(),g=a.item.func,h={path:d._filterByField,filter:g,value:f};if(f==Ra&&(c=d.grid.trigger(Ca,{field:d._filterByField,value:null}),f=c.value,h={path:d._filterByField,filter:g,value:f}),""!==f&&null!==f||"notnull"==g||"isnull"==g){if(d.grid.dataSource.filter&&d.grid.dataSource.filter.and){b=d.grid.dataSource.filter.and;for(var i=0;i<b.length;i++)b[i].path===d._filterByField&&(b[i]=h,e=!1);e&&b.push(h)}else d.grid.dataSource.filter={and:[h]};d.grid.dataSource.read(),d._addRemoveFilterButton(d._filterByField)}},_addRemoveFilterButton:function(c){var d,e,f,g=this;if(b.ui.Button){d=a(g._tr).children("th");for(var h=0;h<d.length;h++)if(e=a(d[h]),e.attr("data-field")&&e.attr("data-field").replace(/[@]/g,"'")==c){f=d[h];break}if(e&&0===e.find(".sui-clear-filter-button").length){var i=a('<button type="button"><span class="sui-sprite sui-clear-filter-button-content"></span></button>').appendTo(f);new b.ui.Button(i,{cls:"sui-clear-filter-button",events:{click:J(this._clearFilterButtonClicked,this)}})}}},_clearFilterButtonClicked:function(a){var b,c,d=this,e=a.target.element.parent().attr("data-field").replace(/[@]/g,"'"),f=d.grid.dataSource.filter.and;for(c=0;c<f.length;c++)f[c].path==e&&f.splice(c,1);b=a.target.element,a.target.destroy(),b.remove(),d._filters[e]!=Ra?d._filters[e].value(null):d.grid.trigger(Da,{field:e,value:null}),d.grid.dataSource.read()},_positionListBox:function(a){var b=this,d=a.target.element,e=d.offset(),f=e.top,g=e.left,h=b.listBox.element.parent().innerWidth(),i=b.listBox.element.parent().innerHeight(),j=(d.innerWidth(),d.innerHeight());g<0&&(g=1),g+h>c.innerWidth&&(g=c.innerWidth-h-20),b._slideUp=!1,f+i>c.innerHeight&&(f-=i,j=0,b._slideUp=!0),f<0&&(f=e.top,j=d.innerHeight(),b._slideUp=!1),b.listBox.element.parent().css({position:"absolute",zIndex:10002,top:f+j,left:g,height:0,display:""})},_setEditorValue:function(a,b,c){var d,e=this;b.customFilter||(d=e._filters[a],d&&d.value(c))},_initializeEditor:function(a,b,c,d){var e=this;if(d.customFilter)e._filters[c]=Ra,d.customFilter.call(e.grid,a);else switch(b){case Number:e._instantiateNumeric(a,c);break;case Date:e._instantiateDatePicker(a,c);break;case String:e._instantiateTextBox(a,c);break;default:e._instantiateTextBox(a,c)}},_instantiateNumeric:function(c,d){var e,f=this,g=a("<input/>").appendTo(c),h=f.grid.trigger(Ba,{field:d,options:{}}),i=K({},h.options);b.ui.NumericTextBox&&(e=new b.ui.NumericTextBox(g,i),f._filters[d]=e)},_instantiateDatePicker:function(c,d){var e,f=this,g=a("<input/>").appendTo(c),h=f.grid.trigger(Ba,{field:d,options:{}}),i=K({},h.options);b.ui.DatePicker&&(e=new b.ui.DatePicker(g,i),f._filters[d]=e)},_instantiateTextBox:function(c,d){var e,f=this,g=a('<input type="text"/>').appendTo(c),h=f.grid.trigger(Ba,{field:d,options:{}}),i=K({},h.options);b.ui.TextBox&&(e=new b.ui.TextBox(g,i),f._filters[d]=e)},destroy:function(){var b,c=this;for(b in c._filters)c._filters.hasOwnProperty(b)&&(c._filters[b]!=Ra&&c._filters[b].destroy(),c._filters[b]=null);c.listBox&&(c.listBox.destroy(),c.listBox=null),a(c._menuWrapper).remove(),a(c._tr).remove(),a(E).off(ra+c._eventNS),c._filterByField=c._filters=c._slideUp=c._menuWrapper=c._tr=null}}),$a=m.extend({init:function(a,b){var c=this;c.grid=b,c.sortExpressions=[],c._eventNS=".shieldGridSorting"+s(),y(a)?(c.allowUnsort=!0,c.multiple=!1,c.firstAscending=!0,c.ascText="&#9650;",c.descText="&#9660;"):x(a)&&(c.allowUnsort=!!B(a.allowUnsort)||a.allowUnsort,c.multiple=a.multiple,c.firstAscending=!!B(a.firstAscending)||a.firstAscending,c.ascText=B(a.ascText)?"&#9650;":a.ascText,c.descText=B(a.descText)?"&#9660;":a.descText),c._initialize()},destroy:function(){var b=this,c=b.grid.headerTable;b.allowUnsort=b.multiple=b.sortExpressions=null,b.length=0,c.find(".sui-headercell .sui-link").each(function(){a(this).parent().html(a(this).html())}),c.off(b._eventNS),c.find('.sui-headercell span[class^="sui-"]').remove()},_initialize:function(){var b,c,d,e=this,f=e.grid,g=f.dataSource.sort,h=f.columns,i={},j=f.headerTable.find(".sui-headercell");if(j.each(function(){var b,c=a(this),d=c.attr("data-field"),e=f._getColumnByField(d);i[d]=c,e&&e.sortable!==!1&&(b=c.html(),c.empty(),c.removeAttr(V),a('<a href="#" class="sui-link sui-unselectable" unselectable="on" tabindex="-1"/>').appendTo(c).html(b))}),f.headerTable.on(ra+e._eventNS,".sui-link",J(e._clickHandler,e)),g)for(b=0;b<g.length;b++)for(d=g[b],c=0;c<h.length;c++)if(h[c].sortable!==!1&&d.path==h[c].field){var k=a(i[h[c].field]),l=k.find(".sui-link"),m=X,n="sui-asc",o=e.ascText;d.desc&&(m=Y,o=e.descText,n="sui-desc"),a(k).attr(V,m),l.addClass(n),a('<span class="sui-'+m+'">'+o+"</span>").appendTo(l)}},_clickHandler:function(b){var c=this,d=a(b.target).closest(".sui-link"),e=c.grid,f=e._getColumnByField(d.parent().attr("data-field"));return d.hasClass("sui-desc")?c.allowUnsort&&c.firstAscending?c._sortInternal(f,!0,!0):c._sortInternal(f,!1,!1):d.hasClass("sui-asc")?c.allowUnsort&&!c.firstAscending?c._sortInternal(f,!1,!0):c._sortInternal(f,!0,!1):c.firstAscending?c._sortInternal(f,!1,!1):c._sortInternal(f,!0,!1),!1},_sortInternal:function(a,b,c){var d=this,e=d.grid,f=e.dataSource,g=f.sort,h=e.trigger(ga,{commandName:ta,cancel:!1,column:a,desc:b,unsort:c});if(!h.cancel){if(g){if(!d.multiple&&g)g.length=0;else{var i=M(g,function(d){return d.path===a.field&&d.desc===(c?b:!b)});if(i.length>0){var j=N(i[0],g);g.splice(j,1)}}c||g.push({path:a.field,desc:b})}else c||(g=f.sort=[{path:a.field,desc:b}]);e._refreshOnSort(),e.trigger(ta,{column:a,desc:b,unsort:c})}},_sort:function(a,b,c){var d,e,f=this,g=f.grid,h=g.dataSource,i=h.sort;if(i&&(d=M(i,function(c){return c.path===a&&c.desc===b})),!d||d.length<=0)if(!f.multiple&&i&&(i.length=0),i){var j=!1,k=M(i,function(c){return c.path===a&&c.desc!=b});k&&k.length>0&&(e=N(k[0],i),i.splice(e,1),j=!0),c||(i.push({path:a,desc:b}),j=!0),j&&g._refreshOnSort()}else c||(h.sort=[{path:a,desc:b}],g._refreshOnSort());else c&&(e=N(d[0],i),i.splice(e,1),g._refreshOnSort())}}),_a=m.extend({init:function(b,c){var d,e=this;d=e._eventNS=".shieldGridSelection"+s(),y(b)?(e.type=Sa,e.multiple=!1,e.toggle=!1,e.spreadsheet=!0,e.drawArea=!1,e.disableTextSelection=!1,e._selectOnMouseDown=!1):x(b)&&(e.type=b.type?b.type:Sa,e.multiple=!!b.multiple,e.toggle=!!z(b.toggle)&&b.toggle,e.spreadsheet=!z(b.spreadsheet)||b.spreadsheet,e.drawArea=z(b.drawArea)?b.drawArea:b.multiple,e.disableTextSelection=!!z(b.disableTextSelection)&&b.disableTextSelection,e._selectOnMouseDown=!e.drawArea&&b.selectEvent==na),e.grid=c,e.lastSelected=null,a(c.headerTable).add(c.frozenHeaderTable).addClass("sui-non-selectable"),a(c.contentTable).add(c.frozenContentTable).addClass(aa),a(c.contentTable).add(c.frozenContentTable).on(na+d,J(e._mouseDownHandler,e)).on(oa+d,J(e._mouseMoveHandler,e)),a(E).on(pa+d,J(e._mouseUpHandler,e)),Q&&a(c.contentTable).add(c.frozenContentTable).on(ja+d,function(){return!1}),e.multiple&&e.drawArea&&(e.area=a(E.createElement("span")).addClass("sui-area sui-area-color"))},destroy:function(){var b=this,c=b._eventNS,d=b.grid;a(d.contentTable).add(d.frozenContentTable).off(c),a(E).off(c),b.area&&b.area.remove(),b.type=b.multiple=b.lastSelected=b.toggle=b.spreadsheet=b.area=b.x=b.y=b.elements=null},select:function(b){var c,d,e,f,g=this;{if(!b)return g.grid.contentTable.find("."+ba);if(c=a(b),d=c.length,d>0)for(f=0;f<d;f++)e=a(c.get(f)),g._selectElement(e),f==d-1&&(g.lastSelected=e)}},clear:function(){var a=this;a.type==Sa?a._clearSelectedRows():a._clearSelectedCells()},_getParentTable:function(a){if(a)return"TABLE"==a[0].nodeName.toUpperCase()?a[0]:a.parent()?this._getParentTable(a.parent()):void 0},_mouseDownHandler:function(c){var d=this,e=d.grid,f=c.pageX,j=c.pageY,k=a(c.target),l=d._getParentTable(k);d.x=f,d.y=j,"TD"==k[0].nodeName.toUpperCase()&&l!=a(e.contentTable)[0]&&l!=a(e.frozenContentTable)[0]||!(k.hasClass("sui-cell")||k.hasClass("sui-row")||k.hasClass("sui-alt-row")||i(c,e.contentTable)||i(c,e.frozenContentTable))||k.hasClass("sui-detail-cell")||k.hasClass("sui-detail-row")||k.hasClass("sui-collapse-cell")||k.hasClass("sui-expand-cell")||k.hasClass("sui-expand-cell-disabled")||k.hasClass("sui-indent-cell")||(d.multiple&&d.drawArea&&d.area.appendTo(E.body).css({left:f+1,top:j+1,width:0,height:0}),a(E).on(oa+d._eventNS,J(d._mouseMoveHandler,d)),(d.drawArea||d.disableTextSelection)&&b.selection(!1),d.elements=g(c,e.contentTable,e.frozenContentTable),d.elements&&d._selectOnMouseDown&&!h(d.elements)&&d._performAndProcessSelection(c))},_mouseMoveHandler:function(a){var b=this,c=a.pageX,d=a.pageY,e=b.x,f=b.y,g={left:e>c?c:e,top:f>d?d:f,width:F(c-b.x),height:F(d-b.y)};b.multiple&&b.drawArea&&b.area.css(g)},_mouseUpHandler:function(c){var d=this,e=d.area;a(E).off(oa+d._eventNS),(d.drawArea||d.disableTextSelection)&&b.selection(!0),!d.elements||d._selectOnMouseDown&&!h(d.elements)||d._performAndProcessSelection(c),e&&e.remove()},_performAndProcessSelection:function(b){var c,d,e,f,g=this,h=g.grid,i=g.area,j=g.elements,k=b.ctrlKey,l=[],m=[],n=[];if(e=h.trigger(ga,{commandName:ha,cancel:!1}),e.cancel)return void(g.elements=null);for(g.elementsToBeSelected=[],g.type==Sa?g._performRowSelection(i,k,j,b):g._performCellSelection(i,k,j,b),f=0;f<g.elementsToBeSelected.length;f++)c=g.elementsToBeSelected[f],!(c.hasClass("sui-cell")||c.hasClass("sui-row")||c.hasClass("sui-alt-row"))||c.hasClass("sui-detail-cell")||c.hasClass("sui-detail-row")||c.hasClass("sui-collapse-cell")||c.hasClass("sui-expand-cell")||c.hasClass("sui-expand-cell-disabled")||c.hasClass("sui-indent-cell")||(l.push(c),d=h._getRowIndex(g.type==Sa?c:a(c).parent()),m.push(d),n.push(d>=0?h.dataSource.getDataIndex(d):d));if(e=h.trigger(ga,{commandName:ia,cancel:!1,toBeSelected:l,viewIndices:m,indices:n}),!e.cancel){for(f=0;f<l.length;f++)g._selectElement(l[f]);h.trigger(ia,{selected:l,viewIndices:m,indices:n}),g.elements=null}},_performRowSelection:function(b,c,d,e){var f=this;if(!(a(e.target).hasClass("sui-expand-cell")||a(e.target).hasClass("sui-expand-cell-disabled")||a(e.target).hasClass("sui-collapse-cell")||a(e.target)&&a(e.target).parent()&&(a(e.target).parent().hasClass("sui-expand-cell")||a(e.target).parent().hasClass("sui-expand-cell-disabled")||a(e.target).parent().hasClass("sui-collapse-cell"))))if(!f.drawArea||e.type===ma||b&&0===b.height()&&0===b.width())f.multiple?f._processMultiRowSelection(e,d):f._processSingleRowSelection(e,d);else if(f.multiple){var g=f.grid.contentTable.find(">tbody > tr"),h=null;I(g,function(b,c){var d=a(c),f=d.offset().top;f<e.pageY&&(h=c.rowIndex)}),c||f._clearSelectedRows(),f._selectRowRange(d.row.rowIndex,h,c)}else f._processSingleRowSelection(e,d)},_performCellSelection:function(b,c,d,e){var f=this;if(!(a(e.target).hasClass("sui-expand-cell")||a(e.target).hasClass("sui-expand-cell-disabled")||a(e.target).hasClass("sui-collapse-cell")||a(e.target)&&a(e.target).parent()&&(a(e.target).parent().hasClass("sui-expand-cell")||a(e.target).parent().hasClass("sui-expand-cell-disabled")||a(e.target).parent().hasClass("sui-collapse-cell"))))if(!f.drawArea||e.type===ma||b&&0===b.height()&&0===b.width())f.multiple?f._processMultiCellSelection(e,d):f._processSingleCellSelection(e,d);else if(f.multiple){var g,h=f.grid.contentTable.find(">tbody > tr > td"),i=[];for(I(h,function(b,c){var d=a(c),g=d.get(0).clientWidth,h=d.get(0).clientHeight,j=d.offset().top,k=d.offset().left,l=j+h,m=k+g,n=G(e.pageX,f.x),o=H(e.pageX,f.x),p=G(e.pageY,f.y),q=H(e.pageY,f.y),r=!1,s=!1;j<p?l>p&&(r=!0):j<q&&(r=!0),k<n?m>n&&(s=!0):k<o&&(s=!0),r&&s&&i.push(c)}),c||f._clearSelectedCells(),g=0;g<i.length;g++){var j=a(i[g]);j.hasClass(ba)?f._deselectElement(a(i[g])):f.elementsToBeSelected.push(a(i[g]))}}else f._processSingleCellSelection(e,d)},_selectRowRange:function(b,c,d){var e,f,g=this,h=G(b,c),i=H(b,c),j=g.grid.contentTable.find(">tbody > tr");for(e=h;e<=i;e++)f=a(j[e]),d&&f.hasClass(ba)?g._deselectElement(f):g.elementsToBeSelected.push(f)},_clearSelectedRows:function(){var b=this,c=b.grid;a(c.frozenContentTable).find("> tbody > tr."+ba).each(function(){b._deselectElement(a(this))}),a(c.contentTable).find("> tbody > tr."+ba).each(function(){b._deselectElement(a(this))})},_clearSelectedCells:function(){var b=this,c=b.grid;a(c.frozenContentTable).find(">tbody > tr > td."+ba).each(function(){b._deselectElement(a(this))}),a(c.contentTable).find(">tbody > tr > td."+ba).each(function(){b._deselectElement(a(this))})},_processSingleRowSelection:function(b,c){var d=this,e=d.toggle,f=d.multiple,g=a(c.row),h=g.hasClass(ba);f||d._clearSelectedRows(),e?h?d._deselectElement(g):d.elementsToBeSelected.push(g):(d._clearSelectedRows(),
d.elementsToBeSelected.push(g)),d.lastSelected=g},_processMultiRowSelection:function(b,c){var d=this,e=d.grid,f=b.ctrlKey,g=b.shiftKey,h=a(c.row);if(f)h.hasClass(ba)?(d._deselectElement(h),d.lastSelected=h):(d.elementsToBeSelected.push(h),d.lastSelected=h);else if(g){e.contentTable.find(">tbody > tr."+ba);if(d.lastSelected){var i=d.lastSelected,j=i.get(0).rowIndex,k=e.contentTable.find(">tbody > tr"),l=h.get(0).rowIndex,m=G(l,j),n=H(l,j);d._clearSelectedRows();for(var o=m;o<=n;o++)if(o!==j){var p=a(k[o]);d.elementsToBeSelected.push(p)}d.elementsToBeSelected.push(a(k[j]))}else d.elementsToBeSelected.push(h),d.lastSelected=h}else d._processSingleRowSelection(b,c)},_processSingleCellSelection:function(b,c){var d=this,e=d.toggle,f=d.multiple,g=a(c.cell),h=g.hasClass(ba);d.lastSelected;f||d._clearSelectedCells(),e?h?d._deselectElement(g):d.elementsToBeSelected.push(g):(d._clearSelectedCells(),d.elementsToBeSelected.push(g)),d.lastSelected=g},_processMultiCellSelection:function(b,c){var d=this,e=d.grid,f=b.ctrlKey,g=b.shiftKey,h=a(c.cell);if(f)h.hasClass(ba)?(d._deselectElement(h),d.lastSelected=h):(d.elementsToBeSelected.push(h),d.lastSelected=h);else if(g)if(d.lastSelected){var i,j=d.lastSelected,k=e.contentTable.get(0),l=k.rows[0].cells.length,m=j.parent().get(0).rowIndex,n=m*l+j.get(0).cellIndex,o=e.contentTable.find(">tbody > tr > td"),p=h.parent().get(0).rowIndex,q=p*l+h.get(0).cellIndex,r=G(q,n),s=H(q,n);if(d._clearSelectedCells(),d.spreadsheet){var t=j[0].cellIndex,u=h[0].cellIndex;r=G(t,u),s=H(t,u);var v=G(m,p),w=H(m,p);for(i=v;i<=w;i++){var x,y=k.rows[i];for(x=r;x<=s;x++)d.elementsToBeSelected.push(a(y.cells[x]))}}else for(i=r;i<=s;i++)if(i!==n){var z=a(o[i]);d.elementsToBeSelected.push(z)}d.elementsToBeSelected.push(a(o[n]))}else d.elementsToBeSelected.push(h),d.lastSelected=h;else d._processSingleCellSelection(b,c)},_selectElement:function(b){a(b).add(this.type==Sa?this.grid._getOtherRow(b):null).addClass(ba)},_deselectElement:function(b){a(b).add(this.type==Sa?this.grid._getOtherRow(b):null).removeClass(ba)}}),ab=m.extend({options:{ns:".shieldGridGroupReorder",returnDuration:50,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div style='border-color:transparent;' class='sui-grid sui-grid-core'><div class='sui-group-panel-indicator'><span class='sui-group-title'>{0}</span><span class='sui-group-close-button'></span></div></div>"},init:function(a){var b=this;b.grid=a,b.options=K(!0,{},ab.fn.options),b._eventNS=b.options.ns+s(),b._events(!0)},_events:function(a){var b=this,c=b.grid.element;a?(b._downProxy=J(b._down,b),c.on(na+b._eventNS,".sui-group-panel-indicator",b._downProxy)):(c.off(na+b._eventNS,".sui-group-panel-indicator",b._downProxy),b._downProxy=null)},_down:function(c){var d=this,e=a(c.target).closest(".sui-group-panel-indicator"),f=e.offset(),g=d.grid.element,h=g.offset(),i=c.pageX,j=c.pageY;if(d.dataField=e.attr("data-field"),!(c.button>1))return d._moveProxy=J(d._move,d),d._upProxy=J(d._up,d),a(E).on(oa+d._eventNS,d._moveProxy).on(pa+d._eventNS,d._upProxy),d.start={left:i-f.left,top:j-f.top,x:i,y:j,target:e,index:e.parent().find(".sui-group-panel-indicator").index(e),positions:d._positions(e),gridPosition:{left:h.left,top:h.top,width:g.outerWidth(),height:g.outerHeight()},isRtl:p.isRtl(g)},b.selection(!1),!1},_move:function(b){var c=this,d=c.options,e=c.dragged,f=c.start,g=b.pageX,h=b.pageY,i=d.dragTreshold;e?(e.css({left:g-f.left,top:h-f.top}),c.hovered=c._index(g,h),c._indicator()):(F(f.x-g)>i||F(f.y-h)>i)&&(c.dragged=a(o(d.draggedTemplate,f.target.html())).css({position:"absolute",left:g-f.left,top:h-f.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",f.target[0].style.cssText).css({width:f.target.width(),height:f.target.height()}).end().appendTo(E.body))},_positions:function(a){var b,c,d=a.parent().children(".sui-group-panel-indicator"),e=0,f=[];for(e;e<d.length;e++)b=d.eq(e),c=b.offset(),f.push({left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()});return f},_index:function(a,b){var c,d,e,f,g=this.start,h=g.gridPosition;for(d=0;d<g.positions.length;d++)if(c=g.positions[d],e=c.left<=a&&a<=c.left+c.width&&c.top<=b&&b<=c.top+c.height,f=h.left<=a&&a<=h.left+h.width&&h.top<=b&&b<=h.top+h.height,e&&f)return d;return-1},_indicator:function(){var b,c=this,d=c.start,e=c.hovered,f=d.positions[e],g=c.reorderIndicator,h=d.gridPosition.left,i=d.gridPosition.left+d.gridPosition.width,j=d.target.parent().children(".sui-group-panel-indicator"),k=d.isRtl?d.index<e:d.index>e;j.removeClass("sui-reorder-target"),g&&g.hide(),null!=e&&e>-1&&(j.eq(e).addClass("sui-reorder-target"),g||(g=c.reorderIndicator=a("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /></div>").appendTo(E.body)),e!==d.index&&(b=f.left+(k?0:f.width),g.css({left:G(H(h,b),i),top:f.top,height:f.height}).show()))},_up:function(c){var d,e=this,f=e.options,g=e.grid,h=e.dragged,i=e.start,j=e.hovered,k=e.dataField;if(e._detachDocumentEvents(),h)if(null!=j&&j>-1){if(h.remove(),d=g.trigger(ga,{commandName:xa,cancel:!1,index:i.index,newIndex:j}),!d.cancel)for(var l=g.dataSource.group,m=0;m<l.length;m++)if(l[m].field==k){var n=l[m];l[m]=l[j],l[j]=n;break}}else setTimeout(function(){h.remove()},p.transitions?f.returnDuration:0),e.grid.dataSource.group&&(d=g.trigger(ga,{commandName:za,cancel:!1,field:k}),d.cancel||(e.grid.ungroup(k),g.trigger(za,d)));e.dragged=e.dataField=e.hovered=j=null,e._indicator(),e.reorderIndicator&&(e.reorderIndicator.remove(),e.reorderIndicator=null),e.start=null,a(E).off(e._eventNS),b.selection(!0),d&&!d.cancel&&(delete d.cancel,delete d.commandName,g.dataSource.read(),g.trigger(xa,d))},_detachDocumentEvents:function(){var b=this;b._moveProxy=b._upProxy=null,a(E).off(b._eventNS)},destroy:function(){var a=this;a.dataField=null,a._detachDocumentEvents(),a._events(!1)}}),bb=m.extend({options:{ns:".shieldGridColumnGroupReorder",returnDuration:150,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div class='sui-grid sui-grid-core'><div class='sui-gridheader'><table class='sui-table'><thead><tr class='sui-columnheader'><th class='sui-headercell'>{0}</th></tr></thead></table></div></div>"},init:function(a){var b=this;b.grid=a,b.options=K(!0,{},cb.fn.options),b._eventNS=b.options.ns+s(),b._events(!0),a.headerTable.addClass("sui-reorderable")},_events:function(a){var b=this,c=b.grid.element;a?(b._downProxy=J(b._down,b),c.on(na+b._eventNS,".sui-headercell",b._downProxy)):(c.off(na+b._eventNS,".sui-headercell",b._downProxy),b._downProxy=null)},_down:function(c){var d=this,e=a(c.target).closest(".sui-headercell"),f=e.offset(),g=d.grid.element,h=g.offset(),i=c.pageX,j=c.pageY;if(!(c.button>1)){var k=e.attr("data-field"),l=d.grid.dataSource.group;if(l)for(var m=0;m<l.length;m++)if(k===l[m].field)return;return a(E).on(oa+d._eventNS,J(d._move,d)).on(pa+d._eventNS,J(d._up,d)),d.start={left:i-f.left,top:j-f.top,x:i,y:j,target:e,index:1e3,positions:d._positions(e),gridPosition:{left:h.left,top:h.top,width:g.outerWidth(),height:g.outerHeight()},isRtl:p.isRtl(g)},b.selection(!1),!1}},_move:function(b){var c=this,d=c.options,e=c.dragged,f=c.start,g=b.pageX,h=b.pageY,i=d.dragTreshold;e?(e.css({left:g-f.left,top:h-f.top}),c.hovered=c._index(g,h),c._indicator()):(F(f.x-g)>i||F(f.y-h)>i)&&(c.dragged=a(o(d.draggedTemplate,f.target.html())).css({position:"absolute",left:g-f.left,top:h-f.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",f.target[0].style.cssText).css({width:f.target.width(),height:f.target.height()}).end().appendTo(E.body))},_positions:function(a){var b,c,d=this.grid.element.find(".sui-group-panel-indicator"),e=0,f=[];for(e;e<d.length;e++)b=d.eq(e),c=b.offset(),f.push({left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()}),e==d.length-1&&f.push({left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()});return f},_index:function(a,b){var c,d,e,f,g,h=this.start,i=h.gridPosition,j=this.grid.element.find(".sui-group-panel");if(h.positions.length>0){for(d=0;d<h.positions.length;d++)if(c=h.positions[d],e=c.left<=a&&a<=c.left+c.width&&c.top<=b&&b<=c.top+c.height,g=i.left<=a&&a<=i.left+i.width&&i.top<=b&&b<=i.top+i.height,f=j.offset().left<=a&&a<=j.offset().left+j.width()&&j.offset().top<=b&&b<=j.offset().top+j.height(),e&&g)return d}else f=j.offset().left<=a&&a<=j.offset().left+j.width()&&j.offset().top<=b&&b<=j.offset().top+j.height();return f?(this.isOnGroupPanel=!0,this.grid.element.find(".sui-group-panel-indicator").length):-1},_indicator:function(){var b,c=this,d=c.start,e=c.hovered,f=d.positions[e],g=c.reorderIndicator,h=d.gridPosition.left,i=d.gridPosition.left+d.gridPosition.width,j=d.target.parent().children(".sui-group-panel-indicator"),k=d.isRtl?d.index<e:d.index>e;j.removeClass("sui-reorder-target"),g&&g.hide(),null!=e&&e>-1&&(j.eq(e).addClass("sui-reorder-target"),g||(g=c.reorderIndicator=a("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /></div>").appendTo(E.body)),this.isOnGroupPanel&&(k=!1),f?(b=f.left+(k?0:f.width),this.isOnGroupPanel=null,g.css({left:G(H(h,b),i),top:f.top,height:f.height}).show()):(b=h+(k?d.gridPosition.width:0),this.isOnGroupPanel=null,g.css({left:b,top:d.gridPosition.top,height:c.grid.element.find(".sui-group-panel-empty").outerHeight()}).show()))},_up:function(c){var d,e=this,f=e.options,g=e.grid,h=e.dragged,i=e.start,j=e.hovered;if(h)if(h.css({left:i.x-i.left,top:i.y-i.top,transition:o("left {0} {1}ms, top {0} {1}ms",f.returnEasing,f.returnDuration)}),null!=j&&j>-1){h.remove();var k=i.target.attr("data-field");d=g.trigger(ga,{commandName:ya,cancel:!1,field:k,index:j}),d.cancel||g.group(k,j,"asc")}else setTimeout(function(){h.remove()},p.transitions?f.returnDuration:0);e.dragged=e.hovered=j=null,e._indicator(),e.reorderIndicator&&(e.reorderIndicator.remove(),e.reorderIndicator=null),e.start=null,a(E).off(e._eventNS),b.selection(!0),d&&!d.cancel&&(delete d.cancel,delete d.commandName,g.dataSource.read(),g.trigger(ya,d))},destroy:function(){this._events(!1),this.grid.headerTable.removeClass("sui-reorderable")}}),cb=m.extend({options:{ns:".shieldGridColumnReorder",returnDuration:150,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div class='sui-grid sui-grid-core'><div class='sui-gridheader'><table class='sui-table'><thead><tr class='sui-columnheader'><th class='sui-headercell'>{0}</th></tr></thead></table></div></div>"},init:function(a){var b=this;b.grid=a,b.options=K(!0,{},cb.fn.options),b._eventNS=b.options.ns+s(),b._events(!0),a.headerTable.addClass("sui-reorderable")},_events:function(a){var b=this,c=b.grid.element;a?(b._downProxy=J(b._down,b),c.on(na+b._eventNS,".sui-headercell",b._downProxy)):(c.off(na+b._eventNS,".sui-headercell",b._downProxy),b._downProxy=null)},_down:function(c){var d=this,e=a(c.target).closest(".sui-headercell"),f=e.offset(),g=d.grid.element,h=g.offset(),i=c.pageX,j=c.pageY;if(!(c.button>1))return a(E).on(oa+d._eventNS,J(d._move,d)).on(pa+d._eventNS,J(d._up,d)),d.start={left:i-f.left,top:j-f.top,x:i,y:j,target:e,index:e.parent().find(".sui-headercell").index(e),positions:d._positions(e),gridPosition:{left:h.left,top:h.top,width:g.outerWidth(),height:g.outerHeight()},isRtl:p.isRtl(g)},b.selection(!1),!1},_move:function(b){var c=this,d=c.options,e=c.dragged,f=c.start,g=b.pageX,h=b.pageY,i=d.dragTreshold;e?(e.css({left:g-f.left,top:h-f.top}),c.hovered=c._index(g,h),c._indicator()):(F(f.x-g)>i||F(f.y-h)>i)&&(c.dragged=a(o(d.draggedTemplate,f.target.html())).css({position:"absolute",left:g-f.left,top:h-f.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",f.target[0].style.cssText).css({width:f.target.width(),height:f.target.height()}).end().appendTo(E.body))},_positions:function(a){var b,c,d=a.parent().children(".sui-headercell"),e=0,f=[];for(e;e<d.length;e++)b=d.eq(e),c=b.offset(),f.push({left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()});return f},_index:function(a,b){var c,d,e,f,g=this.start,h=g.gridPosition;for(d=0;d<g.positions.length;d++)if(c=g.positions[d],e=c.left<=a&&a<=c.left+c.width&&c.top<=b&&b<=c.top+c.height,f=h.left<=a&&a<=h.left+h.width&&h.top<=b&&b<=h.top+h.height,e&&f)return d;return-1},_indicator:function(){var b,c=this,d=c.start,e=c.hovered,f=d.positions[e],g=c.reorderIndicator,h=d.gridPosition.left,i=d.gridPosition.left+d.gridPosition.width,j=d.target.parent().children(".sui-headercell"),k=d.isRtl?d.index<e:d.index>e;j.removeClass("sui-reorder-target"),g&&g.hide(),null!=e&&e>-1&&(j.eq(e).addClass("sui-reorder-target"),g||(g=c.reorderIndicator=a("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /></div>").appendTo(E.body)),e!==d.index&&(b=f.left+(k?0:f.width),g.css({left:G(H(h,b),i),top:f.top,height:f.height}).show()))},_up:function(c){var d,e=this,f=e.options,g=e.grid,h=e.dragged,i=e.start,j=e.hovered;h&&(h.css({left:i.x-i.left,top:i.y-i.top,transition:o("left {0} {1}ms, top {0} {1}ms",f.returnEasing,f.returnDuration)}),null!=j&&j>-1?(h.remove(),d=g.trigger(ga,{commandName:va,cancel:!1,index:i.index,newIndex:j}),d.cancel||g.reorderColumn(i.index,j)):setTimeout(function(){h.remove()},p.transitions?f.returnDuration:0)),e.dragged=e.hovered=j=null,e._indicator(),e.reorderIndicator&&(e.reorderIndicator.remove(),e.reorderIndicator=null),e.start=null,a(E).off(e._eventNS),b.selection(!0),d&&!d.cancel&&(delete d.cancel,delete d.commandName,g.trigger(va,d))},destroy:function(){this._events(!1),this.grid.headerTable.removeClass("sui-reorderable")}}),db=l.extend({init:function(){l.fn.init.apply(this,arguments);var a=this;a._eventNS=".shieldGrid"+a.getInstanceId(),a.refresh(),a._dM()},destroy:function(){this._destroyInternal(),l.fn.destroy.call(this)},_destroyInternal:function(){var b,d,e,f=this,g=f.options,h=f._eventNS;if(f.contentWrapper){if(f._markedCells){for(d in f._markedCells)f._markedCells.hasOwnProperty(d)&&(f._markedCells[d].length=0);f._markedCells=null}if(a(c).off(h),f._destroyFrozenContainers(),f.sorting&&(f.sorting.destroy(),f.sorting=null),f.virtualizedContainer&&(f.virtualizedContainer.destroy(),f.virtualizedContainer=null),f.columns)for(b=0;b<f.columns.length;b++)f.columns[b].destroy();if(f.contentWrapper&&f.contentWrapper.off(fa),f.scrollableWrapper=null,f._selectable&&(f._selectable.destroy(),f._selectable=null),g.scrolling?(f.contentWrapper.parent().remove(),f.headerWrapper.parent().remove()):(f.contentWrapper.remove(),f.headerWrapper.remove()),f._hasDetailTemplate()&&f.contentTable.off(h),f.popupWindow&&f.popupWindow.destroy(),f._footer&&(a(f._footer).remove(),f._footer=null),f.columns=f._gridColumns=f._windowEditingIndex=f.contentWrapper=f.headerWrapper=f.contentTable=f.hederTable=null,f._buttons){for(b=0;b<f._buttons.length;b++)e=f._buttons[b].button.element,f._buttons[b].button.destroy(),e.remove();f._buttons.length=0}f.pager&&(f.pager.destroy(),f.pager=null,f.pagerWrapper&&(f.pagerWrapper.parent().remove(),f.pagerWrapper=null)),f.loadingPanel&&(f.loadingPanel=null,clearTimeout(f.loadingPanelTimeout),f.loadingPanelTimeout=null),f._columnResizing&&(f._columnResizing.destroy(),f._columnResizing=null),f._toolbar&&(f._toolbar.destroy(),f._toolbar=null),f._editing&&(f._editing.destroy(),f._editing=null),f._columnReorder&&(f._columnReorder.destroy(),f._columnReorder=null),f._sortingInProgress=f._loadingVirtualRows=f._scrollLeft=f._scrollTop=f._populateInsertedItem=f._preventClosingEditors=f._editingInProcess=null,f._filter&&(f._filter.destroy(),f._filter=null),f._groupReorder&&(f._groupReorder.destroy(),f._groupReorder=null),f._columnGroupReorder&&(f._columnGroupReorder.destroy(),f._columnGroupReorder=null),f.dataSource.off(h),f.element.off(h).removeClass("sui-grid sui-grid-core").css(_,"").empty()}},_dM:function(){var b=function(b){return a("<div/>").html(b).text()},c="&#68;&#101;&#109;&#111;&#32;&#86;&#101;&#114;&#115;&#105;&#111;&#110;",d=E.createTextNode(b(c));a(d).insertAfter(a(this.element))},_resizeHandler:function(){var a=this;a._adjustWidthsLocked(),a._adjustHeightsLocked()},_hasDetailTemplate:function(){var a=this.options;return a.detailTemplate||a.events&&a.events.detailCreated},_hasVirtualScrolling:function(){var a=this.options;return a.scrolling&&a.scrolling.virtual&&!a.paging&&!this._hasDetailTemplate()},_canExpandCollapse:function(){return this.options.detailExpandCollapse!==!1},_resolveColumns:function(a){var c,d=this;if(d.columns=[],u.array(a))for(c=0;c<a.length;c++)d.columns.push(new Xa(a[c]));else b.error("Invalid columns declaration. The columns have to be array.",d.options.dieOnError);for(d._gridColumns={},c=0;c<d.columns.length;c++)d._gridColumns[d.columns[c].field]={index:c}},_createWrappers:function(){var b,c,d=this,e=d.element;d._wrapper(),b=a("<div/>").prependTo(e),b.addClass("sui-gridcontent"),c=a("<div/>").prependTo(e),c.addClass("sui-gridheader"),d.options.showHeader||(c.css(Pa,Qa),b.addClass("sui-no-header")),d.headerWrapper=c,d.contentWrapper=b},_wrapper:function(){var a=this.options.height,b=this.element;b.is("div")||(b=b.wrap("<div/>").parent()),b.addClass("sui-grid sui-grid-core"),b&&b.css(_,a)},_createGroupPanel:function(){var b,c,d,e,f=this,g=f.options.grouping,h=!1,i=f.dataSource;if(d=f.element.find(".sui-group-panel"),d.length>0&&d.remove(),g.showGroupHeader)if(i.group&&0!==i.group.length){for(b=a('<div class="sui-group-panel"/>'),a(f.element).prepend(b),e=0;e<i.group.length;e++)c=i.group[e],f._createGroupHeaderIndicator(c,b),h=!0;h&&g.allowDragToGroup&&(f._groupReorder&&f._groupReorder.destroy(),f._groupReorder=new ab(f),f._columnGroupReorder&&f._columnGroupReorder.destroy(),f._columnGroupReorder=new bb(f))}else a(f.element).prepend(a('<div class="sui-group-panel sui-group-panel-empty">'+g.message+"</div>"))},_createGroupHeaderIndicator:function(b,c){var d,e,f=this,g=f._getColumnByField(b.field),h=g?g.groupTitle:b.field;e=a('<div class="sui-group-panel-indicator" data-field="'+b.field+'"/>').appendTo(c),d="desc"==b.order?a('<span class="sui-descending">&#9660;</span>').appendTo(e):a('<span class="sui-ascending">&#9650;</span>').appendTo(e),d.on(ra,J(f._sortButtonClickedHandler,f)),a('<span class="sui-group-title">'+h+"</span>").appendTo(e),f.options.grouping.allowDragToGroup&&a('<span class="sui-group-close-button">&#10006;</span>').on(ra,J(f._closeButtonClickedHandler,f)).appendTo(e)},_sortButtonClickedHandler:function(b){for(var c=this,d=a(b.currentTarget),e=d.parent().attr("data-field"),f=c.dataSource.group,g=0;g<f.length;g++)f[g].field==e&&(d.hasClass("sui-descending")?f[g].order="asc":f[g].order="desc",c.dataSource.read())},_closeButtonClickedHandler:function(b){var c,d=this,e=a(b.currentTarget),f=e.parent().attr("data-field");d.dataSource.group&&(c=d.trigger(ga,{commandName:za,cancel:!1,field:f}),c.cancel||(d.ungroup(f),d.trigger(za,c)))},_createHeaderTable:function(){var b=this,c=b.headerWrapper,d=b.element;d.is("table")||(d=c.children("table"),d.length||(d=a("<table/>").appendTo(c))),R&&d.attr("cellspacing",0),d.addClass("sui-table"),b.headerTable=d,b._createTbody(d,!0),b._createThead(d),b._createFakeRow(d,b.columns.length)},_createContentTable:function(){var b=this,c=b.options,d=b.contentWrapper,e=b.element;e.is("table")||(e=d.children("table"),e.length||(e=a("<table/>").appendTo(d))),R&&e.attr("cellspacing",0),e.addClass("sui-table"),c.rowHover&&e.addClass("sui-hover"),b._hasDetailTemplate()&&(b._canExpandCollapse()&&e.addClass("sui-expandable"),e.on(ra+b._eventNS,"> tbody > tr > .sui-expand-cell, > tbody > tr > .sui-collapse-cell",J(b._expandCollapseDetailTemplate,b))),b.contentTable=e,b._createTbody(b.contentTable,!1)},_createTbody:function(b,c){var d=b.find("> tbody");d.length||(d=a("<tbody/>").appendTo(b)),c&&d.addClass("sui-hide"),b.tbody=d},_createThead:function(b){var c,d,f,g,h,i,j=this,k=(j.options,j.columns),l="",m=b.find(">thead");for(m.length||(m=a("<thead/>").insertBefore(b.tbody)),f=b.find("tr:has(th):first"),f.length||(f=m.children().first(),f.length||(f=a("<tr/>").appendTo(m))),f.attr(U,Sa),f.empty(),c=0,d=k.length;c<d;c++)g=k[c],h=g.headerTemplate||g.title||g.field||g,i=!!k[c].sortable,l+="<th "+e(g.headerAttributes)+' data-field="'+k[c].field+'" role="columnheader"'+(i?' tabindex="-1"':"")+">"+h+"</th>";if(f.html(l),f.addClass("sui-columnheader"),f.find("th").addClass("sui-headercell"),k.length&&j._hasDetailTemplate()&&j._canExpandCollapse()){var n=a('<th class="sui-indent-cell"/>');R&&n.html("&nbsp;"),n.prependTo(f)}b.thead=m},_createFakeRow:function(b,c){var d,e,f=b.find(">tbody");if(f.length){for(d=a("<tr/>"),e=0;e<c;e++)a("<td/>").appendTo(d);d.appendTo(f)}},_createColgroup:function(b){var c,d,e,f=this,g=f.options,h=f.columns,i=b.find(">colgroup");for(i.length||(i=a("<colgroup/>").prependTo(b)),i.html(""),g.columns.length&&f._hasDetailTemplate()&&f._canExpandCollapse()&&a('<col class="sui-indent-col"/>').appendTo(i),c=0,d=h.length;c<d;c++)e=h[c].width,a(e&&0!==parseInt(e,10)?o('<col style="width:{0}"/>',w(e)?e:e+"px"):"<col/>").data(Ua,h[c].field).appendTo(i)},scrollTop:function(b){var c=this,d=c.options,e=d.scrolling,f=c._hasVirtualScrolling(),g=c.contentWrapper;if(e)if(z(b))f?c.virtualizedContainer&&c.virtualizedContainer.scrollTop(b):a(g).scrollTop(b);else{if(!f)return a(g).scrollTop();if(c.virtualizedContainer)return c.virtualizedContainer.scrollTop()}},_scrolling:function(){var b,c,e,f=this,g=f.options,h=a(f.element),i=(p.isRtl(h),f.dataSource),j=f._hasVirtualScrolling(),k=f.headerWrapper,l=f.contentWrapper,m=k.outerHeight(),n=!(j||"auto"!==g.height&&z(g.height)),o=!j&&z(g.maxHeight)?parseInt(g.maxHeight,10):d,q=0,r=0,s=0;if(k.parent().hasClass("sui-gridheader sui-scrolldiv")?m=k.parent().outerHeight():(k.addClass("sui-headercontent").removeClass("sui-gridheader"),k.wrap('<div class="sui-gridheader sui-scrolldiv"/>'),l.addClass("sui-content").removeClass("sui-gridcontent"),l.wrap('<div class="sui-gridcontent sui-scroller"/>'),R&&(f.headerTable.addClass("sui-table-ie7").removeClass("sui-table"),f.contentTable.addClass("sui-table-ie7").removeClass("sui-table")),e=f.scrollableWrapper=j?l.parent():l,e.on(fa,J(f._onscroll,f))),f.pagerWrapper&&(q=f.pagerWrapper.outerHeight()),f._toolbar){var t,u=h.find(".sui-toolbar"),v=0;for(t=0;t<u.length;t++)v+=a(u[0]).outerHeight();r+=v+1}var w=h.find(".sui-group-panel");w.length>0&&(s+=w.outerHeight()),n?c="auto":(b=h.innerHeight(),c=b-m-q-r-s),a(l).add(l.parent()).css(_,c),o&&o<h.innerHeight()&&(c=o-m-q-r-s,a(l).add(l.parent()).css(_,c)),j?(f._ensureVirtualizedContainer(),f.virtualizedContainer.options.total=i.total,f.virtualizedContainer.render(),f._fixHeaderPadding(f.virtualizedContainer.wrapper.parent())):(f._fixHeaderPadding(l),n||!Q||R||S||p.hasScrollbarX(l)||l.css(_,c+1))},_fixHeaderPadding:function(b){var c=this,d=p.isRtl(c.element),e=c.headerWrapper,f=a(b).get(0);f&&(f.scrollHeight-f.clientHeight>1?(e.parent().css(d?"padding-left":"padding-right",p.scrollbar()-1),e.removeClass("sui-no-y-scroll")):(e.parent().css(d?"padding-left":"padding-right",0),e.addClass("sui-no-y-scroll")))},_ensureVirtualizedContainer:function(){var a,c,d=this;d.virtualizedContainer||(a=d._renderRow(0,d.contentTable.tbody,{}),c=a.outerHeight(),a.remove(),d.virtualizedContainer=new b.ui.VirtualizedContainer(d.scrollableWrapper,{itemHeight:c,total:d.dataSource.total,createContainer:function(a){return a.addClass("sui-content").append(d.contentTable).find("tbody").empty()},getItems:J(d._loadVirtualRows,d),skipRender:!0}),d.contentWrapper=d.virtualizedContainer.element.children().eq(0))},_loadVirtualRows:function(a,b,c){var d=this,e=d.dataSource,f=null!=e.skip?e.skip:0,g=null!=e.take?e.take:e.view.length,h=100,i=d.virtualizedContainer.container;if(a<b)if(!d._sortingInProgress&&e.remote&&(a<f||b>=f+g))clearTimeout(d._loadWaitTimeout),d._loadWaitTimeout=setTimeout(function(a,b,c){return function(){d._loadWaitTimeout=null,e.skip=a,e.take=b-a,d._loadingVirtualRows=!0,e.one(ca+".shieldGrid"+d.getInstanceId(),function(){d._loadWaitTimeout||(d._loadingVirtualRows=!1)}),e.read().then(function(){if(!d._loadWaitTimeout){i.empty();for(var f=a;f<b&&f<e.total;f++)d._renderRow(f-a,i,e.view[f-a]);d.loading(!1),c([],!1),d.trigger(la),d.trigger(ka)}})}}(a,b,c),h);else{i.empty();for(var j=a;j<b&&j<e.total;j++)d._renderRow(j,i,e.view[j]);c([],!1),d.trigger(la),d.trigger(ka)}else d._renderNoRecords();d._checkIfVerticalScroll(),d._initSelection()},_checkIfVerticalScroll:function(){var a=this,b=a.element.find(".sui-virtualized").get(0),c=a.element.get(0),d=b.scrollHeight>c.scrollHeight;d?(a.headerWrapper.parent().css("padding-right","16px"),a.headerWrapper.removeClass("sui-grid-no-gap")):(a.headerWrapper.parent().css("padding-right","0px"),a.headerWrapper.addClass("sui-grid-no-gap"))},_onscroll:function(b){var c,d=this,e=d.scrollableWrapper,f=e.get(0),g=d.headerWrapper,h=e.scrollLeft(),i=g.scrollLeft();if(p.isRtl(d.element)&&T&&f.clientHeight<f.scrollHeight&&(h+=f.offsetWidth-f.clientWidth),h!=i&&(g.scrollLeft(h),d._footer&&(c=a(d._footer).find(".sui-footer-content"),c.length>0&&c.scrollLeft(h))),d.frozenHeaderWrapper){var j=e.scrollTop(),k=d.frozenContentWrapper.scrollTop();j!=k&&d.frozenContentWrapper.scrollTop(j)}},_sorting:function(){var a=this,b=a.options.sorting;a.element;b&&a.columns.length&&(a.sorting&&a.sorting.destroy(),a.sorting=new $a(b,a))},_renderData:function(){var b,c,d=this,e=d.dataSource.view,f=d.options;f.scrolling,!!B(f.altRows)||f.altRows,f.rowTemplate,f.altRowTemplate,d.contentTable;if(!d._loadingVirtualRows&&(c=d.trigger(ga,{commandName:ka,cancel:!1}),!c.cancel)){d._sortingInProgress=!1,d.columns.length||(b=[],e.length&&I(e[0],function(a,c){b.push(a)}),f.columns=b,d._resolveColumns(b)),d._filtering(),d._destroyFrozenContainers(),d._createThead(d.headerTable),d._createColgroup(d.headerTable),d._createColgroup(d.contentTable),d.contentTable.tbody.empty(),d._sorting(),d._renderRows(),d._renderFooter();var g=function(b){return a("<div/>").html(b).text()},h=g("&#83;&#104;&#105;&#101;&#108;&#100;&#85;&#73;");d._refreshColVisibility(),e&&e.length>0&&d._initFrozenCols(),d._initSelection(),d.loading(!1);var i=g("&#104;&#116;&#116;&#112;&#58;&#47;&#47;&#119;&#119;&#119;&#46;&#115;&#104;&#105;&#101;&#108;&#100;&#117;&#105;&#46;&#99;&#111;&#109;");d.trigger(ka);var j=i;d.dmL||(d.dmL=a('<a href="'+j+'" target="_blank"> by '+h+"</a>"),a(d.dmL).css({color:"grey","text-decoration":"none"}).insertAfter(a(this.element)))}},_renderRows:function(){var a,b,c=this,d=c.dataSource,e=d.view;if(c._markedCells){for(b in c._markedCells)c._markedCells.hasOwnProperty(b)&&(c._markedCells[b].length=0);c._markedCells=null}return e&&e.length?(c._hasVirtualScrolling()&&!c._sortingInProgress||(a=d.group,a&&a.length>0?(c._renderGroupedData(e,0,0),c._addGroupIndentCells(),c._addGroupDataIndentCells(),c.contentTable.addClass("sui-grouped-table")):c._renderRowsAndDetails(e)),c._createGroupPanel(),void c._initScrolling()):(c._renderNoRecords(),c._createGroupPanel(),c._addGroupIndentCells(),void c._initScrolling())},_addGroupIndentCells:function(){var b,c,d,e,f,g=this,h=g.dataSource.group,i=g.options,j=i.filtering&&i.filtering.enabled;if(h&&h.length>0)for(b=g.headerTable.find(">colgroup").first(),c=g.contentTable.find(">colgroup").first(),d=g.headerTable.thead.find(".sui-columnheader").first(),j&&(e=g.headerTable.find(".sui-filter-row").first()),b.find(".sui-indent-col").remove(),d.find(".sui-columnheader > .sui-indent-cell").remove(),e&&e.length>0&&e.find(".sui-indent-cell").remove(),f=0;f<h.length;f++)a('<col class="sui-indent-col"/>').prependTo(b),a('<th class="sui-indent-cell"/>').prependTo(d),e&&e.length>0&&a('<th class="sui-indent-cell"/>').prependTo(e),a('<col class="sui-indent-col"/>').prependTo(c)},_getVisibleColumnCount:function(){var a,b=this.columns||[],c=b.length,d=0;for(a=0;a<c;a++)b[a].visible&&d++;return d},_renderNoRecords:function(){var b=this,c=b.options,d=b.contentTable;B(c.noRecordsTemplate)?a('<tr><td class="sui-grid-norecords-cell" colspan="'+b._getVisibleColumnCount()+'" role="gridcell">'+(c.noRecordsText||"No records to display")+"</td></tr>").appendTo(d.tbody):a('<td class="sui-grid-norecords-cell" colspan="'+b._getVisibleColumnCount()+'" role="gridcell"/>').append(c.noRecordsTemplate).wrap("<tr/>").parent().appendTo(d.tbody)},_initScrolling:function(){var a=this;a.options.scrolling&&!a._sortingInProgress&&a._scrolling()},_initSelection:function(){this._selection()},_addGroupDataIndentCells:function(){var b,c,d,e,f=this,g=f.contentTable.get(0).rows;for(b=0;b<g.length;b++)if(d=a(g[b]),e=parseInt(d.attr("data-group-level"),10),d.hasClass("sui-group-header")){if(e>1)for(c=0;c<e-1;c++)a('<td class="sui-indent-cell"/>').prependTo(d)}else for(c=0;c<e;c++)a('<td class="sui-indent-cell sui-group-intend-cell"/>').prependTo(d)},_renderGroupedData:function(a,b,c){var d,e,f=this;for(f.options.detailExpandCollapse=!1,d=0;d<a.length;d++)e=a[d],e.hasOwnProperty("field")&&e.hasOwnProperty("items")&&e.hasOwnProperty("value")?(c++,f._renderGroupHeader(e,c),f._renderGroupedData(e.items,b,c),f._renderGroupAggregates(e),c--):(f._renderDataItem(e,b,c),b++)},_renderGroupAggregates:function(b){if(b.aggregate){var c,d,e,f,g,h=this,i=h.columns,j={},k=b.aggregate;for(f=0;f<i.length;f++)if(d=i[f].groupFooterTemplate){c=a("<tr class='sui-group-footer' />").appendTo(h.contentTable.tbody);break}if(c){for(f=0;f<i.length;f++)if(g=a("<td class='sui-group-footer-cell' />").appendTo(c),d=i[f].groupFooterTemplate){e=i[f].field;for(var l=0;l<k.length;l++)k[l].field==e&&(v(k[l].aggregate)?j.custom=k[l].value:j[k[l].aggregate]=k[l].value);if(v(d)){var m=d.call(h,g,j);z(m)&&!C(m)&&""!==m&&g.html(m)}else g.html(o.call(h,d,j))}var n=h.dataSource.group.length;for(f=0;f<n;f++)c.prepend(a("<td class='sui-indent-cell' />"))}}},_renderGroupHeader:function(b,c){var d=this,e=d.contentTable,f=d._getVisibleColumnCount()+d.dataSource.group.length-c+1,g=a('<tr class="sui-group-header" data-group-level="'+c+'"/>').appendTo(e),h=a('<td class="sui-group-header-cell" colspan="'+f+'"/>').appendTo(g),i=a('<span class="sui-collapse">&#9662;</span>').appendTo(h),j=d._getColumnByField(b.field),k=j?j.groupHeaderTitle:b.field;a('<span class="sui-group-header-text">'+k+": "+b.value+"</span>").appendTo(h),i.on(ra,J(d._expandCollapseHandler,d))},_expandCollapseHandler:function(b){var c,d=this,e=a(b.currentTarget),f=e.parent().parent();e.hasClass("sui-collapse")?(c=d.trigger(ga,{commandName:La,cancel:!1,row:f}),c.cancel||(d.collapseGroup(f),e.html("&#9656;"),e.removeClass("sui-collapse").addClass("sui-expand"),d.trigger(La,{row:f}))):(c=d.trigger(ga,{commandName:Ma,cancel:!1,row:f}),c.cancel||(d.expandGroup(f),e.html("&#9662;"),e.removeClass("sui-expand").addClass("sui-collapse"),d.trigger(Ma,{row:f})))},_renderDataItem:function(a,b,c){var d=this,e=d.contentTable;d._renderRow(b,e,a).attr("data-group-level",c)},_renderRowsAndDetails:function(a){var b,c,d=this,e=d.contentTable;for(c=0,b=a.length;c<b;c++)d._renderRow(c,e.tbody,d.dataSource.view[c]),d._hasDetailTemplate()&&!d._canExpandCollapse()&&d._addDetailTemplate(a[c])},_renderRow:function(b,c,d){var f,g,h,i,j=this,k=z(c),l=j.options,m=!!B(l.altRows)||l.altRows,n=m&&b%2&&l.altRowTemplate?l.altRowTemplate:l.rowTemplate,p=j.columns;if(n)w(n)&&(n=n.replace(/^\s+/,"").replace(/\s+$/,"")),g=a(o(n,d)),k&&c.append(g);else{if(g=a('<tr class="'+(m&&b%2?"sui-alt-row":"sui-row")+'"/>').data(Ta,b),arguments.length>3){var q=arguments[3],s=c.find("tr"),t=s.eq(q);s.length==q?c.append(g):g.insertBefore(t)}else k&&c.append(g);for(i=0;i<p.length;i++){var u,x,y=p[i],A=y.columnTemplate,D=y.format,E=y.field,F=y.buttons,G=a("<td "+e(y.attributes)+' role="gridcell" tabindex="-1"/>').addClass("sui-cell").appendTo(g);if(G.attr(U,"gridcell").attr(Z,"-1"),y.editable||G.attr(W,$),F)for(x=0;x<F.length;x++)j._buildButton(F[x],G,b);else A?v(A)?(u=A.call(j,G,d,b),z(u)&&!C(u)&&""!==u&&G.html(u)):G.html(o.call(j,A,d)):D?G.html(o.call(j,D,E?r(d,E):d)):G.html(""+r(d,E));y.visible||G.css(Pa,Qa)}}return j._hasDetailTemplate()&&j._canExpandCollapse()&&(h=j.trigger(ga,{
commandName:Ea,cancel:!1,item:d}),h.cancel?f=a('<td class="sui-cell sui-expand-cell-disabled"/>'):(f=a('<td class="sui-cell sui-expand-cell"/>'),j._setExpandCollapseCellText(f,l.detailExpandText,l.detailCollapseText)),f.prependTo(g)),g.attr(U,Sa),g},_renderFooter:function(){var b,c,d,e,f,g,h,i=this,j=i.options,k=i.columns,l={},m=i.dataSource.aggregates;for(i._footer&&(a(i._footer).remove(),i._footer=null),f=0;f<k.length;f++)if(d=k[f].footerTemplate){if(j.scrolling&&j.scrolling.virtual){var n=a('<div class="sui-footer" style="padding-right:16px;"/>').appendTo(i.element),p=a('<div class="sui-footer-content"/>').appendTo(n),q=a('<table class="sui-table"/>').appendTo(p),r=i.element.find(".sui-headercontent > table > colgroup > col"),s=a("<colgroup/>").appendTo(q);for(g=0;g<r.length;g++)a(r[g].outerHTML).appendTo(s);b=a("<tbody/>").appendTo(q),i._footer=n}else b=a("<tfoot/>").appendTo(i.contentTable),i._footer=b;c=a('<tr class="sui-grid-footer"/>').appendTo(b);break}if(c){for(f=0;f<k.length;f++)if(h=a('<td class="sui-footer-cell" role="gridcell" tabindex="-1"/>').appendTo(c),d=k[f].footerTemplate){for(e=k[f].field,g=0;g<m.length;g++)m[g].field==e&&(v(m[g].aggregate)?l.custom=m[g].value:l[m[g].aggregate]=m[g].value);if(v(d)){var t=d.call(i,h,l);z(t)&&!C(t)&&""!==t&&h.html(t)}else h.html(o.call(i,d,l))}var u=c.prev();u.length<=0&&(u=i.contentTable.find(">tbody > tr").first()),(u.find(".sui-expand-cell").length>0||u.find(".sui-expand-cell-disabled").length>0||u.find(".sui-indent-cell").length>0||u.find(".sui-collapse-cell").length>0)&&c.prepend(a("<td/>"))}},_buildButton:function(c,d,e){var f,g=this,h=c.commandName,i=c.click;if(b.ui.Button){var j=a('<button type="button">'+c.caption+"</button>").appendTo(d);d.addClass("sui-button-cell"),"delete"===h?(i=g._deleteButtonClicked,B(c.cls)?c.cls="sui-delete":c.cls+=" sui-delete"):"edit"===h&&(g._editing&&(g._editing.type=Sa),g._preventClosingEditors=!0,i=g._editButtonClicked,B(c.cls)?c.cls="sui-edit":c.cls+=" sui-edit"),f=new b.ui.Button(j,{cls:c.cls,events:{click:J(i,g,e,d)}}),"delete"!=h&&"edit"!=h||(g._buttons||(g._buttons=[]),g._buttons.push({index:e,button:f}))}},_deleteButtonClicked:function(a,b){var d,e=this,f=e.dataSource,g=e.options.editing,h=g?g.confirmation:null;if(d=e.trigger(ga,{commandName:Ja,cancel:!1,rowIndex:a}),!d.cancel){if(h&&h["delete"]&&h["delete"].enabled&&!c.confirm(o(h["delete"].template,f.view[a])))return;f.removeAtView(a),g&&!g.batch&&f.save(!1),e.trigger(Ja,{rowIndex:a})}},_editButtonClicked:function(c,d){var e=this,f=e._editing,g=e.dataSource,h=a(d).parent(),i=e.trigger(ga,{commandName:Ga,cancel:!1,row:h,cell:d,index:e._getRowIndex(h)});i.cancel||(e._editingInProcess=!0,g.tracker&&g.tracker.changes&&g.tracker.changes.added&&g.tracker.changes.added.length>0?g.cancel():"popup"!=e.options.editing.mode?(e._closeAllEditedRows(),f&&f.options.enabled&&f._putRowInEditMode(h,0),e._changeEditColumnButtons(c,d)):b.ui.Window&&e._initializePopupForm(c),e.trigger(Ga,{row:a(d).parent(),cell:d,index:e._getRowIndex(a(d).parent())}))},_initializePopupForm:function(c,d){var e,f,g,h,i,j=this,k=j._editing,l=j.dataSource;for(e=a('<div class="sui-modal-popup-edit-window"/>').appendTo(E.body),f=a('<div class="sui-edit-form-container"/>'),g=j.options.columns,h=0;h<g.length;h++)if(i=g[h],i.editable!==!1&&i.field){var m=z(l.schema.options.fields)?l.schema.options.fields[i.field].type:String,n=l.editView(c).data,o=r(n,i.field);j._windowEditingIndex=c,a('<div class="sui-edit-form-label"><label for="'+i.field+'">'+(i.caption?i.caption:i.field)+"</label></div>").appendTo(f);var p=a('<div class="sui-edit-field"></div>').appendTo(f);if(i.editor)k._instantiateCustomEditor(i,p,n,0,!1,i.field);else switch(m){case Number:k._instantiateNumeric(p,o,!1,i.field);break;case Date:k._instantiateDatePicker(p,o,!1,i.field);break;case String:k._instantiateTextBox(p,o,!1,i.field);break;case Boolean:k._instantiateCheckBox(p,o,!1,i.field)}}var q=a('<div class="sui-update-buttons sui-popup-buttons"></div>').appendTo(f),s=a("<button type='button'>Save</button>").appendTo(q),t=a("<button type='button'>Cancel</button>").appendTo(q);if(b.ui.Button){var u=new b.ui.Button(s,{events:{click:J(j._updateButtonClicked,j)}}),v=new b.ui.Button(t,{events:{click:J(j._cancelButtonClicked,j)}});j._buttons=[],j._buttons.push({index:1e4,button:u}),j._buttons.push({index:1e4,button:v})}f.appendTo(E.body),j.popupWindow=new b.ui.Window(e,{title:d?"Insert":"Edit",draggable:{enabled:!1},events:{close:J(j._cancelButtonClicked,j)},height:a(".sui-edit-form-container").height()+57,modal:!0}),j.popupWindow.content(f),j.popupWindow.resize({width:a(".sui-modal-popup-edit-window").width(),height:a(".sui-edit-form-container").height()+66}),j.trigger(d?Oa:Na)},_changeEditColumnButtons:function(a,b){var c=this;c._removeButtons(b,a),c._buildButton({caption:"Update",click:c._updateButtonClicked,cls:"sui-update"},b,a),c._buildButton({caption:"Cancel",click:c._cancelButtonClicked,cls:"sui-cancel"},b,a),b.addClass("sui-update-buttons")},_removeButtons:function(a,b){for(var c=this,d=c._buttons.length;d--;)c._buttons[d].index==b&&(c._buttons[d].button.destroy(),c._buttons.splice(d,1));a.removeClass("sui-update-buttons").empty()},_updateButtonClicked:function(a,b){var c=this;return B(c._windowEditingIndex)||(a=c._windowEditingIndex),c._updateItem(a,b),c._editing._errorDuringEdit?void(c._editing._errorDuringEdit=!1):(c._putRowInViewMode(a,b),void("popup"===c.options.editing.mode&&c._removePopupWindow()))},_updateItem:function(a,b){var c,e,f,g,h,i,j,k=this,l=k.dataSource,m=(k.pager,[]),n=!0;if(l.group&&l.group.length>0&&"popup"!=k.options.editing.mode)for(h=k.contentTable.find(".sui-row, .sui-alt-row"),i=k.contentTable.find("tr").get(a),j=0;j<h.length;j++)if(h[j]==i){a=j;break}c=l.editView(a);for(g in c.data)c.data.hasOwnProperty(g)&&(null!=c.data[g]&&(n=!1),k._editing._editors[g]&&("custom"==k._editing._editors[g]?(f=k.trigger("getCustomEditorValue",{field:g,value:null}),e=f.value,k._editing._editors[g]=null):e=k._editing._editors[g].value?k._editing._editors[g].value():k._editing._editors[g].checked?k._editing._editors[g].checked():d,c.data[g]!=e&&m.push(g),(B(e)||null==e)&&(e=k._getDefaultValue(g)),c.set(g,e)));return k._editing._errorDuringEdit?void(m.length=0):(k._editing.options.batch||(f=k.trigger(ga,{commandName:Ia,cancel:!1}),f.cancel||(l.save(!1),k.trigger(Ia))),k._populateInsertedItem=n,m)},_getDefaultValue:function(a){var c,d=this,e=d.dataSource.schema;return e&&e.options.fields?(c=e.options.fields,b.Model.def(r(c,a+".type"),r(c,a+".def"),r(c,a+".nullable"))):""},_closeAllEditedRows:function(){var b,c,d=this,e=d.contentTable.find(".sui-editable-cell");e.length>0&&(b=e.get(0).parentNode.rowIndex,c=d.contentTable.find(".sui-update-buttons").get(0),d._cancelButtonClicked(b,a(c)))},_cancelButtonClicked:function(a,b){var c,d,e,f=this,g=f.dataSource,h=f.trigger(ga,{commandName:Fa,cancel:!1,rowIndex:a,cell:b});if(!h.cancel){if(g.tracker&&g.tracker.changes&&g.tracker.changes.added&&g.tracker.changes.added.length>0)g.cancel(),"popup"===f.options.editing.mode&&f._removePopupWindow();else if("popup"!=f.options.editing.mode)f._putRowInViewMode(a,b);else{for(c=f.options.columns,d=0;d<c.length;d++)e=f._editing._editors[c[d].field],e&&(v(e.destroy)&&f._editing._editors[c[d].field].destroy(),delete f._editing._editors[c[d].field]);f._removePopupWindow()}f.trigger(Fa)}},_removePopupWindow:function(){var b=this;b._removeButtons(a(".sui-window .sui-update-buttons"),1e4),b.popupWindow.destroy(),a(".sui-modal-popup-edit-window").remove()},_getRowIndex:function(b){var c=a(b).data(Ta);return z(c)?c:-1},_putRowInViewMode:function(b,c){var d,e,f,g,h=this,i=h.options,j=i.navigation,k=h.dataSource,l=h.contentTable,m=b,n=-1;if(k.group&&k.group.length>0&&"popup"!=i.editing.mode)for(f=l.find(">tbody > tr.sui-row, >tbody > tr.sui-alt-row"),e=l.find(">tbody > tr").get(b),g=0;g<f.length;g++)if(f[g]==e){m=g;break}d=k.view[m],c&&"popup"!=i.editing.mode&&h._removeButtons(c,b),e=l.find(">tbody > tr").get(b);var o=parseInt(a(e).attr("data-group-level"),10);for(j&&(n=a(e).children("td").index(h._activeCell)),h._editing._destroyRow(b),e=h._renderRow(m,h.contentTable.tbody,d,b),j&&n>-1&&(h._activeCell=a(e).children("td").eq(n),a(h._activeCell).focus()),g=0;g<o;g++)a('<td class="sui-indent-cell sui-group-intend-cell"/>').prependTo(e);if(o&&e.attr("data-group-level",o),h._editing.options.batch){var p=e.children(".sui-cell");if(h._markedCells&&h._markedCells[b]){var q,r,s=h._markedCells[b];for(g=0;g<s.length;g++)q=s[g],r=a(p[q]).html(),a(p[q]).html('<span class="sui-updated-marker"/>'+r)}}},_renderUpdateMarkers:function(b,c){var d,e,f,g=this,h=g.columns,i=g.contentTable.find(">tbody > tr").eq(c).children(".sui-cell");for(d=0;d<b.length;d++)for(e=0;e<h.length;e++)h[e].field===b[d]&&(f=a(i[e]).html(),a(i[e]).html('<span class="sui-updated-marker"/>'+f),g._markedCells?(g._markedCells[c]||(g._markedCells[c]=[]),g._markedCells[c].push(e)):(g._markedCells={},g._markedCells[c]=[],g._markedCells[c].push(e)))},_selection:function(){var a=this,b=a.options;b.selection&&(a._selectable&&a._selectable.destroy(),a._selectable=new _a(b.selection,a))},_filtering:function(){var a=this,b=a.options;b.filtering&&b.filtering.enabled&&(a._filter&&a._filter.destroy(),a._filter=new Za(a))},_paging:function(c){var d,e=this,f=e.element;b.ui.Pager&&c&&(x(c)&&c instanceof b.ui.Pager?(e.pager=c,e.pager.dataSource=e.dataSource,e.pager.element.appendTo(f)):(d=a("<div/>").appendTo(f),d.addClass("sui-pager"),e.pagerWrapper=d,e.pager=new b.ui.Pager(d.get(0),K({},c,{dataSource:e.dataSource}))))},_reorder:function(){var a=this,b=a.options;b.columnReorder&&(a._columnReorder=new cb(a))},_expandCollapseDetailTemplate:function(b){var c=this,d=a(b.target).closest(".sui-row",c.contentTable);d.length||(d=a(b.target).closest(".sui-alt-row",c.contentTable)),c._toggleDetailTemplate(d)},_toggleDetailTemplate:function(b){var c,d=this,e=d.contentTable.find("tr:first").parent().children().not(".sui-detail-row"),f=N(b[0],e),g=d.dataSource.view,h=b.next(),i=d.options;h&&h.hasClass("sui-detail-row")?(h.toggle(),c=a(b.get(0).cells[0]),d._toggleClasses(c,"sui-expand-cell","sui-collapse-cell"),d._setExpandCollapseCellText(c,i.detailExpandText,i.detailCollapseText)):d._addDetailTemplate(g[f],b)},_setExpandCollapseCellText:function(a,b,c){B(c)&&(c="-"),B(b)&&(b="+");var d=this.options.detailCollapseCssClass,e=this.options.detailExpandCssClass;d=B(d)?"":" class = '"+d+"'",e=B(e)?"":" class = '"+e+"'",a.hasClass("sui-collapse-cell")?a.html("<span"+d+">"+c+"</span>"):a.hasClass("sui-expand-cell")&&a.html("<span"+e+">"+b+"</span>")},_addDetailTemplate:function(b,c){var d,e=this,f=e.options,g=a("<tr class='sui-detail-row'/>");e._canExpandCollapse()&&(d=a("<td class='sui-cell sui-indent-cell'/>"),R&&d.html("&nbsp;"),d.appendTo(g));var h=a('<td class="sui-detail-cell" colspan="'+e._getVisibleColumnCount()+'"></td>'),i=e.trigger(ga,{commandName:ua,cancel:!1,detailCell:h,item:b});if(!i.cancel&&(h.appendTo(g),f.detailTemplate&&h.html(o(f.detailTemplate,b)),c?g.insertAfter(c):g.appendTo(e.contentTable.tbody),e.trigger(ua,{detailCell:h,item:b}),c)){var j=a(c.get(0).cells[0]);e._toggleClasses(j,"sui-expand-cell","sui-collapse-cell"),e._setExpandCollapseCellText(j,f.detailExpandText,f.detailCollapseText)}},_toggleClasses:function(a,b,c){a.hasClass(b)?(a.removeClass(b),a.addClass(c)):(a.removeClass(c),a.addClass(b))},_resizing:function(){var a=this;a.options.resizing&&a.options.scrolling&&(a._columnResizing=new Ya(a))},_initToolbar:function(){var a=this,b=a.options;b.toolbar&&(a._toolbar=new Va(b.toolbar,a))},_initEditing:function(){var a=this,b=a.options;b.editing&&(a._buttons=[],a._editing=new Wa(b.editing,a))},_refreshOnSort:function(){this._sortingInProgress=!0,this.dataSource.read()},_dsStartHandler:function(){this.loading(!0)},_initNavigation:function(){var b=this,c=b.element,d=b._eventNS+"nav",e=".sui-headercell[tabindex], .sui-filter-cell[tabindex], .sui-cell[tabindex], .sui-footer-cell[tabindex]";b.options.navigation&&(c.addClass("sui-grid-nav").off(d).on(da+d,e,function(c){a(b._activeCell).attr(Z,"-1"),b._activeCell=a(this),a(b._activeCell).attr(Z,"0")}),b._initActiveCell(),a(b._activeCell).attr(Z,"0"))},_initActiveCell:function(){var b=this;(a(b._activeCell).length<=0||!a(b._activeCell).is(":visible"))&&(b._activeCell=a(b.element).find(".sui-cell[tabindex]").first(),a(b._activeCell).length<=0&&(b._activeCell=a(b.element).find(".sui-headercell[tabindex]").first()))},_cellEditable:function(b){return a(b).attr(W)!=$&&!!a(b).hasClass("sui-editable-cell")},_keydown:function(b){var c,d=this,e=d.element,f=b.keyCode,h=d.options,i=h.navigation,j=h.editing,k=h.selection,l=b.ctrlKey,m=(b.shiftKey,d.pager),n=!1,o=d._cellEditable(d._activeCell);if("button"!==a(b.target).prop("tagName").toLowerCase()||f!=t.ENTER&&f!=t.SPACE){switch(f){case t.UP:i&&(o||(c=d._getNextNavCell("up"),c&&(a(c).focus(),n=!0)));break;case t.DOWN:i&&(o||(c=d._getNextNavCell("down"),c&&(a(c).focus(),n=!0)));break;case t.LEFT:i&&(o||(c=d._getNextNavCell("left"),c&&(a(c).focus(),n=!0)));break;case t.RIGHT:i&&(o||(c=d._getNextNavCell("right"),c&&(a(c).focus(),n=!0)));break;case t.HOME:i&&(o||(c=l?a(e).find(".sui-cell[tabindex], .sui-headercell[tabindex], .sui-footer-cell[tabindex]").first():d._getNextNavCell("first"),c&&(a(c).focus(),n=!0)));break;case t.END:i&&(o||(c=l?a(e).find(".sui-cell[tabindex], .sui-headercell[tabindex], .sui-footer-cell[tabindex]").last():d._getNextNavCell("last"),c&&(a(c).focus(),n=!0)));break;case t.ENTER:i&&(a(d._activeCell).hasClass("sui-cell")?j&&(o?d._updateButtonClicked(a(d._activeCell).parent().get(0).rowIndex,a(d._activeCell)):d._editing._editingTriggered(b),n=!0):a(d._activeCell).hasClass("sui-headercell")&&(a(d._activeCell).children(".sui-link").length>0&&(d.one(ka,J(d.focus,d)),a(d._activeCell).children(".sui-link").first().click()),n=!0));break;case t.PAGEUP:i&&(m&&m.hasPrev()&&(d.one(ka,J(d.focus,d)),d.pager.prev()),n=!0);break;case t.PAGEDOWN:i&&(m&&m.hasNext()&&(d.one(ka,J(d.focus,d)),d.pager.next()),n=!0);break;case t.ESC:o&&(d.cancelEditing(),i&&a(d._activeCell).focus(),n=!0);break;case t.SPACE:i&&k&&d._selectable&&!o&&(d._selectable.elements=g(b,d.contentTable,d.frozenContentTable),d._selectable.elements&&d._selectable._performAndProcessSelection(b),n=!0)}n&&b.preventDefault()}},_getNextNavCell:function(b){var c,d=this,e=(d.element,d._activeCell);return(!e||a(e).length<=0)&&(e=a(d.element).find('.sui-cell[tabindex="0"], .sui-headercell[tabindex="0"]').first()),"left"==b?c=d.__findPrevFocusCell(e):"right"==b?c=d.__findNextFocusCell(e):"up"==b?c=d.__findAboveFocusCell(e):"down"==b?c=d.__findBelowFocusCell(e):"first"==b?c=d.__findFirstFocusCell(e):"last"==b&&(c=d.__findLastFocusCell(e)),c&&a(c).length>0?a(c).get(0):null},__findFirstFocusCell:function(a){for(var b,c=this,d=c.__findPrevFocusCell(a);d&&d.length>0;)b=d,d=c.__findPrevFocusCell(d);return b},__findLastFocusCell:function(a){for(var b,c=this,d=c.__findNextFocusCell(a);d&&d.length>0;)b=d,d=c.__findNextFocusCell(d);return b},__findPrevFocusCell:function(b){for(var c=a(b).prev();c&&c.length>0;){if(f(c,Z))return c;c=a(b).prev()}return d},__findNextFocusCell:function(b){for(var c=a(b).next();c&&c.length>0;){if(f(c,Z))return c;c=a(b).next()}return d},__findAboveFocusCell:function(b){for(var c,e=this,g=a(b).closest("tr"),h=a(b).index(),i=e.headerTable.find(">thead > tr").add(e.contentTable.find(">tbody > tr")).add(e.contentTable.find(">tfoot > tr")),j=a(i).index(g);j>0;){if(c=a(a(i)[j-1]).children().eq(h),f(c,Z))return c;j--}return d},__findBelowFocusCell:function(b){for(var c,e=this,g=a(b).closest("tr"),h=a(b).index(),i=e.headerTable.find(">thead > tr").add(e.contentTable.find(">tbody > tr")).add(e.contentTable.find(">tfoot > tr")),j=a(i).index(g);j<i.length-1;){if(c=a(a(i)[j+1]).children().eq(h),f(c,Z))return c;j++}return d},focus:function(){var b=this;b.options.navigation?(b._initActiveCell(),a(b._activeCell).length>0?a(b._activeCell).focus():j(b.element)):j(b.element)},refresh:function(d){var e=this,f=d?d.dataSource:null,g=e._eventNS;d=b.extend([m],e.options,d),f&&(d.dataSource=f);var h,i=e.element,j=d.scrolling,k=e.pager?e.pager.options:d.paging,l=0;j&&e.contentWrapper&&(l=e.contentWrapper.get(0).scrollLeft),e._destroyInternal(),h=e.dataSource=n.create(d.dataSource),i.attr(U,"grid").on(ma+g,J(e._keydown,e)),d.editing||i.attr(W,$),h.on(ca+g,J(e._renderData,e)).on(ea+g,J(e._dsStartHandler,e)),a(c).on(qa+g,J(e._resizeHandler,e)),e._resolveColumns(d.columns),e._createWrappers(),e._createHeaderTable(),e._createContentTable(),e._initToolbar(),e._initEditing(),e._filtering(),e._paging(k),e._resizing(),e._reorder(),e._initNavigation(),e.pager||e.dataSource.read(),e._sorting(),l&&(e.contentWrapper.get(0).scrollLeft=l)},loading:function(a,c){var d=this,e=function(){d.loadingPanel&&d.loadingPanel.show()};b.ui.LoadingPanel&&(a?(d.loadingPanel||(d.loadingPanel=new b.ui.LoadingPanel(d.element.get(0))),c?e():d.loadingPanelTimeout=setTimeout(e,50)):d.loadingPanel&&(clearTimeout(d.loadingPanelTimeout),d.loadingPanelTimeout=null,d.loadingPanel.hide()))},select:function(b){var c=this,d=c._selectable;return b=w(b)?c.contentTable.find(b):a(b),b.length?(d.multiple||(d.clear(),b=b.first()),void d.select(b)):d.select()},selectedRowIndices:function(){var b=this,c=[],d=[];return b.contentTable.children("tbody").children(".sui-row, .sui-alt-row").each(function(){if(a(this).hasClass(ba)){var e=b._getRowIndex(a(this));c.push(e),d.push(e>=0?b.dataSource.getDataIndex(e):e)}}),{view:c,data:d}},clearSelection:function(){this._selectable.clear()},sort:function(a,b,c){this.sorting&&this.sorting._sort(a,b,c)},_getItemRow:function(b){return a(A(b)?this.contentTable.children("tbody").children(".sui-row, .sui-alt-row").get(b):b)},expandRow:function(a){var b=this,c=b._getItemRow(a),d=c.next();d.hasClass("sui-detail-row")?d.css(Pa)==Qa&&b._toggleDetailTemplate(c):b._toggleDetailTemplate(c)},collapseRow:function(a){var b=this,c=b._getItemRow(a),d=c.next();d.hasClass("sui-detail-row")?d.css(Pa)!=Qa&&b._toggleDetailTemplate(c):(b._toggleDetailTemplate(c),c.next().toggle())},reorderColumn:function(b,c,d){var e,f=this,g=f.element,h=f.columns,i=f.options.columns||[],j=f.headerWrapper,k="before",l=j.find(".sui-columnheader").first().find(".sui-indent-cell").length;if(b=+b,c=+c,isNaN(b)||isNaN(c)||b<0||c<0||b>h.length-1||c>h.length-1)throw new Error("Invalid index in column reorder.");b!==c&&(c>b&&(k="after"),e=h[b],!e.visible||!d&&e.locked||(e=h.splice(b,1)[0],h.splice(c,0,e),e=i.splice(b,1)[0],i.splice(c,0,e),b+=l,c+=l,g.find(".sui-gridheader col:nth-child("+(b+1)+")").add(g.find(".sui-gridheader .sui-columnheader th:nth-child("+(b+1)+")")).add(g.find(".sui-gridheader .sui-filter-row th:nth-child("+(b+1)+")")).add(g.find(".sui-gridcontent col:nth-child("+(b+1)+")")).add(g.find(".sui-gridcontent tr:not(.sui-detail-row) td:nth-child("+(b+1)+")")).each(function(){a(this).parent().children().eq(c)[k](this)})))},addRow:function(a){return this.dataSource.add(z(a)?a:{})},insertRow:function(a,b){return this.dataSource.insertView(a,z(b)?b:{})},saveChanges:function(){this.dataSource.save()},revertChanges:function(){this.dataSource.cancel()},dataItem:function(a){return this.dataSource.view[a]},editCell:function(a,b){var c=this,d=c.contentTable.find(">tbody > tr").eq(a).children("td").eq(b).get(0);c._editingInProcess=!0,c._editing._putCellInEditMode(d)},editRow:function(b){var c=this,d=c.contentTable.find(">tbody > tr").eq(b).get(0);c._editingInProcess=!0,c._editing._putRowInEditMode(a(d),0)},editRowPopup:function(a){var c=this;c._editingInProcess=!0,b.ui.Window&&c._initializePopupForm(a)},cancelEditing:function(){var b,c,d=this,e=d.contentTable.find(".sui-editable-cell");e.length>0&&(b=e.get(0).parentNode.rowIndex,c=d.contentTable.find(".sui-update-buttons").get(0),d._putRowInViewMode(b,a(c))),d._editingInProcess=!1},deleteRow:function(a){this.dataSource.removeAtView(a)},filter:function(){var a=this,b=a.dataSource,c=[].slice.call(arguments);return c.length>0?(b.filter=c[0],void b.read()):b.filter},group:function(a,b,c,d){var e=this,f=e.dataSource.group;f?f.splice(b,0,{field:a,order:c,aggregates:d}):(e.dataSource.group=[],e.dataSource.group.push({field:a,order:c,aggregates:d}))},ungroup:function(a){var b,c=this,d=c.dataSource.group,e=!1;for(c.headerTable.thead.find(".sui-columnheader > .sui-indent-cell").remove(),b=0;b<d.length;b++)if(d[b].field==a){d.splice(b,1),0===d.length&&(c.dataSource.group=null),e=!0;break}e&&c.dataSource.read()},collapseGroup:function(a){for(var b=!0,c=parseInt(a.attr("data-group-level"),10);b;)if(a=a.next().css(Pa,Qa),a.next().length>0){var d=parseInt(a.next().attr("data-group-level"),10);d<=c&&a.next().hasClass("sui-group-header")&&(b=!1)}else b=!1},expandGroup:function(a){for(var b=!0,c=parseInt(a.attr("data-group-level"),10);b;){if(a=a.next().css(Pa,""),a.hasClass("sui-group-header")&&a.find(".sui-expand").length>0)return;if(a.next().length>0){var d=parseInt(a.next().attr("data-group-level"),10);d<=c&&a.next().hasClass("sui-group-header")&&(b=!1)}else b=!1}},_getColumnByField:function(a){var b,c=this,e=c.columns||[];for(b=0;b<e.length;b++)if(e[b].field===a)return e[b];return d},_refreshColVisibility:function(){var a,b=this,c=b.columns,d=c.length,e=!1;for(a=0;a<d;a++)if(!c[a].visible){e=!0;break}if(e)for(a=0;a<d;a++)c[a].visible?b.showColumn(c[a].field):b.hideColumn(c[a].field)},_getNextVisibleColumnRealIndex:function(a){var b,c=this,d=c.columns;for(b=a.index+1;b<d.length;b++)if(d[b].visible)return b;return-1},isHidden:function(a){var b=this._getColumnByField(a);return b?!b.visible:d},hideColumn:function(b){var c=this,d=(a(c.element),c._getColumnByField(b));d&&!d.locked&&(a(c.headerTable).find("colgroup").first().find("col").each(function(){if(a(this).data(Ua)==b)return c._gridColumns[b].headerCol=a(this),a(this).detach(),!1}),a(c.contentTable).find("colgroup").first().find("col").each(function(){if(a(this).data(Ua)==b)return c._gridColumns[b].contentCol=a(this),a(this).detach(),!1}),c._changeColumnVisibility(b,"hide"),d.visible=!1,c._afterColumnVisibilityChange())},showColumn:function(b){var c,e,f,g,h,i=this,j=(a(i.element),i._getColumnByField(b)),k=a(i.headerTable).find("colgroup"),l=a(i.contentTable).find("colgroup");j&&!j.locked&&(c=i._gridColumns[b],e=c.headerCol,f=c.contentCol,g=i._getNextVisibleColumnRealIndex(c),g===-1?(k.append(e),l.append(f)):(h=i.columns[g].field,k.find("col").each(function(){if(a(this).data(Ua)==h)return a(e).insertBefore(a(this)),!1}),l.find("col").each(function(){if(a(this).data(Ua)==h)return a(f).insertBefore(a(this)),!1})),i._changeColumnVisibility(b,"show"),c.headerCol=c.contentCol=d,j.visible=!0,i._afterColumnVisibilityChange())},_changeColumnVisibility:function(b,c){var d,e,f=this,g=a(f.element),h=a(f.headerTable).find(".sui-columnheader").first(),i=a(f.headerTable).find(".sui-filter-row").first(),j=-1;if(h.length&&a(h).children().each(function(c){if(a(this).attr("data-field")==b)return j=c,!1}),!(j<0))for(a(h.find("th")[j])[c](),a(i.find("th")[j])[c](),d=g.find("> .sui-gridcontent > table > tbody > tr"),0===d.length&&(d=g.find("> .sui-gridcontent > .sui-virtualized > table > tbody > tr")),0===d.length&&(d=g.find("> .sui-gridcontent > .sui-content > table > tbody > tr")),e=0;e<d.length;e++)a(d[e].cells[j])[c]()},_afterColumnVisibilityChange:function(){var b=this,c=b._getVisibleColumnCount(),d=b.dataSource,e=d.group?d.group.length:0;a(b.contentTable).find(".sui-grid-norecords-cell, .sui-detail-cell, .sui-group-header-cell").each(function(){a(this).hasClass("sui-group-header-cell")?a(this).attr("colspan",c+e-D(a(this).parent().attr("data-group-level"))+1):a(this).attr("colspan",c)})},_getVisibleColumnFields:function(){var a,b=this,c=b.columns||[],d=c.length,e=[];for(a=0;a<d;a++)c[a].visible&&e.push(c[a].field);return e},_initFrozenCols:function(){var a,b=this,c=b.columns,d=c.length,e=!1;for(a=0;a<d;a++)if(c[a].locked){e=!0;break}if(e)for(b._initFrozenContainers(),a=0;a<d;a++)c[a].locked&&b.lockColumn(c[a].field)},_initFrozenContainers:function(){var b=this,c=b.options,d=c.scrolling;b.frozenHeaderWrapper||(b.frozenHeaderWrapper=a('<div class="sui-header-locked"/>').prependTo(d?b.headerWrapper.parent():b.headerWrapper),b.frozenHeaderTable=a('<table class="sui-table sui-non-selectable"'+(R?' cellspacing="0"':"")+'><colgroup/><thead><tr class="sui-columnheader"/>'+(c.filtering&&c.filtering.enabled?'<tr class="sui-filter-row"/>':"")+'</thead><tbody class="sui-hide"/></table>').appendTo(b.frozenHeaderWrapper)),b.frozenContentWrapper||(b.frozenContentWrapper=a('<div class="sui-content-locked"/>').prependTo(d?b.contentWrapper.parent():b.contentWrapper),b.frozenContentWrapper.height(b.frozenContentWrapper.parent().find(".sui-content").first().height()),b.frozenContentTable=a('<table class="sui-table'+(c.rowHover?" sui-hover":"")+'"'+(R?' cellspacing="0"':"")+'><colgroup/><tbody/><tfoot><tr class="sui-grid-footer"/></tfoot></table>').appendTo(b.frozenContentWrapper),b._hasDetailTemplate()&&(b._canExpandCollapse()&&b.frozenContentTable.addClass("sui-expandable"),b.frozenContentTable.on(ra+b._eventNS,"> tbody > tr > .sui-expand-cell, > tbody > tr > .sui-collapse-cell",J(b._expandCollapseDetailTemplate,b))))},_destroyFrozenContainers:function(){var b=this;b.frozenHeaderWrapper&&(a(b.frozenHeaderWrapper).remove(),b.frozenHeaderWrapper=null),b.frozenContentWrapper&&(a(b.frozenContentWrapper).find(".sui-table").off(b._eventNS),a(b.frozenContentWrapper).remove(),b.frozenContentWrapper=null)},isLocked:function(a){var b=this._getColumnByField(a);return b?b.locked:d},lockColumn:function(b){var c,d,e=this,f=a(e.element),g=e.options.filtering,h=e._getColumnByField(b),i=-1,j=e._footer;if(h&&h.visible){if(a(e.headerTable).find("colgroup").first().find("col").each(function(){if(a(this).data(Ua)==b)return a(this).appendTo(a(e.frozenHeaderTable).find("colgroup")),!1}),a(e.contentTable).find("colgroup").first().find("col").each(function(){if(a(this).data(Ua)==b)return a(this).appendTo(a(e.frozenContentTable).find("colgroup")),!1}),a(e.headerTable).find(".sui-columnheader").children().each(function(c){if(a(this).attr("data-field")==b)return i=c,a(this).appendTo(a(e.frozenHeaderTable).find(".sui-columnheader")),!1}),g&&g.enabled&&i>=0&&a(e.headerTable).find(".sui-filter-row").children().each(function(c){if(a(this).attr("data-field")==b)return a(this).appendTo(a(e.frozenHeaderTable).find(".sui-filter-row")),!1}),j&&i>=0){var k=a(e.frozenContentTable).find("> tfoot > .sui-grid-footer");a(j).find(".sui-grid-footer td:eq("+i+")").appendTo(k)}if(i>=0){c=f.find("> .sui-gridcontent > table > tbody > tr"),0===c.length&&(c=f.find("> .sui-gridcontent > .sui-virtualized > table > tbody > tr")),0===c.length&&(c=f.find("> .sui-gridcontent > .sui-content > table > tbody > tr"));var l=a(e.frozenContentTable).find("tbody"),m=l.children().length>0;for(d=0;d<c.length;d++){var n=null;n=m?a(l).children()[d]:a(c[d]).clone(!0,!1).empty().appendTo(l),a(c[d].cells[i]).appendTo(n)}}h.locked=!0,e._adjustWidthsLocked(),e._adjustHeightsLocked()}},unlockColumn:function(b){var c,d,e,f,g=this,h=(a(g.element),g.options.filtering),i=g.columns,j=g._footer,k=g._getColumnByField(b),l=-1,m=-1;if(k&&k.visible){for(a(g.frozenHeaderTable).find("colgroup").first().children().each(function(){if(a(this).data(Ua)==b)return c=a(this),l=a(this).index(),!1}),a(g.frozenContentTable).find("colgroup").first().children().each(function(){if(a(this).data(Ua)==b)return d=a(this),m=a(this).index(),!1}),f=0;f<i.length;f++)if(i[f].field===b){f<=i.length-2&&(e=i[f+1].field);break}if(e)a(g.headerTable).find("> colgroup col").each(function(b){if(a(this).data(Ua)===e){if(a(c).insertBefore(a(this)),a(g.frozenHeaderTable).find(".sui-columnheader th:eq("+l+")").insertBefore(a(g.headerTable).find(".sui-columnheader th:eq("+b+")")),h&&h.enabled&&a(g.frozenHeaderTable).find(".sui-filter-row th:eq("+l+")").insertBefore(a(g.headerTable).find(".sui-filter-row th:eq("+b+")")),j){var d=a(g.frozenContentTable).find("> tfoot > .sui-grid-footer");a(d).find("td:eq("+l+")").insertBefore(a(j).find(".sui-grid-footer td:eq("+b+")"))}return!1}}),a(g.contentTable).find("> colgroup col").each(function(b){if(a(this).data(Ua)===e){a(d).insertBefore(a(this));var c=a(g.contentTable).find(">tbody").first().children();return a(g.frozenContentTable).find(">tbody > tr").each(function(d){a(this).find("td:eq("+m+")").insertBefore(a(c[d]).find("td:eq("+b+")"))}),!1}});else{if(a(g.headerTable).find("colgroup").append(c),a(g.contentTable).find("colgroup").append(d),a(g.frozenHeaderTable).find(".sui-columnheader th:eq("+l+")").appendTo(a(g.headerTable).find(".sui-columnheader")),h&&h.enabled&&a(g.frozenHeaderTable).find(".sui-filter-row th:eq("+l+")").appendTo(a(g.headerTable).find(".sui-filter-row")),j){var n=a(g.frozenContentTable).find("> tfoot > .sui-grid-footer");a(n).find("td:eq("+l+")").appendTo(a(j).find(".sui-grid-footer"))}var o=a(g.contentTable).find(">tbody").first().children();a(g.frozenContentTable).find(">tbody > tr").each(function(b){a(this).find("td:eq("+m+")").appendTo(a(o[b]))})}k.locked=!1,g._adjustWidthsLocked(),g._adjustHeightsLocked()}},_adjustWidthsLocked:function(){var b=this;b.frozenHeaderWrapper&&(a(b.headerWrapper).parent().css(p.isRtl(b.element)?"padding-left":"padding-right",0),a(b.headerWrapper).outerWidth(a(b.headerWrapper).parent().innerWidth()-a(b.frozenHeaderWrapper).outerWidth()-p.scrollbar()),a(b.contentWrapper).outerWidth(a(b.contentWrapper).parent().innerWidth()-a(b.frozenContentWrapper).outerWidth()-1))},_adjustHeightsLocked:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this,q=p.options.filtering,r=p._footer;if(p.frozenHeaderWrapper){for(g=a(p.frozenHeaderTable).find("tr").first(),g.height("auto"),h=D(g.height()),i=a(p.headerTable).find("tr").first(),i.height("auto"),j=D(i.height()),h>j?(g.height(h),i.height(h)):h<j&&(g.height(j),i.height(j)),q&&q.enabled&&(k=a(p.frozenHeaderTable).find("tr.sui-filter-row").first(),k.height("auto"),l=D(k.height()),m=a(p.headerTable).find("tr.sui-filter-row").first(),m.height("auto"),n=D(m.height()),l>n?(k.height(l),m.height(l)):l<n&&(k.height(n),m.height(n))),c=a(p.frozenContentTable).find("tbody").first().children(),e=a(p.contentTable).find("> tbody").children(),o=0;o<e.length;o++)a(c[o]).height("auto"),d=D(a(c[o]).height()),a(e[o]).height("auto"),f=D(a(e[o]).height()),d>f?(a(c[o]).height(d),a(e[o]).height(d)):d<f&&(a(c[o]).height(f),a(e[o]).height(f));if(r){var s,t,u=a(p.frozenContentTable).find("> tfoot > .sui-grid-footer"),v=a(r).find(".sui-grid-footer").first();u.height("auto"),s=D(u.height()),v.height("auto"),t=D(v.height()),s>t?(u.height(s),v.height(s)):s<t&&(u.height(t),v.height(t))}b&&p._initScrolling()}},_getOtherRow:function(b){var c,d,e,f=this;if(f.frozenHeaderWrapper){if(c=a(b).index(),d=a(f.frozenContentTable).find("tbody").first().children(),e=a(f.contentTable).find("> tbody").children(),a(b)[0]===a(d)[c])return a(e)[c];if(a(b)[0]===a(e)[c])return a(d)[c]}return null},exportExcel:function(){this._doExcelExport()},exportPdf:function(){this._doPdfExport()},exportCsv:function(){this._doCsvExport()},_doExcelExport:function(){var a,b,c,e,f,g,h,i,j=this,k=j.options,l=[],m=[];q&&(h=j.trigger(ga,{commandName:"exportExcel",cancel:!1,exportOptions:K(!0,{},k.exportOptions)}),h.cancel||(j.loading(!0,!0),setTimeout(function(){a=K(!0,{proxy:d,excel:{fileName:"Untitled",fileFormat:"xlsx",noLegacyFallback:!1,author:d,created:new Date,producer:d,dataSource:d,readDataSource:!1,columnFields:d,header:{enabled:!0,style:{bold:!0},cells:d},worksheet:{name:"Sheet1",columns:d},worksheets:[],worksheetIndex:0}},h.exportOptions),b=a.excel,f=b.columnFields,f||(f=j._getVisibleColumnFields()),g=f.length,b.worksheet.columns||(b.worksheet.columns=L(f,function(a){return{autoWidth:!0}})),e=K(!0,{},b.worksheet),b.header&&b.header.enabled&&(b.header.cells?m.push({cells:b.header.cells}):m.push({cells:L(f,function(a){var c=j._getColumnByField(a);return{type:String,value:z(c)&&c.title?c.title:a,style:b.header.style}})})),c=n.create(b.dataSource?b.dataSource:j.dataSource),
i=function(){var d,h,i,k,n=c.view||[],o=n.length,p=[];for(i=0;i<g;i++)p[i]=r(c,"schema.options.fields."+f[i]+".type");for(i=0;i<o;i++){var s,t,u=n[i],v=j.trigger(ga,{commandName:"exportExcelRow",cancel:!1,item:u,index:i,row:{}}),w=[];if(!v.cancel){for(s=K(!0,{},v.row),k=0;k<g;k++)t={type:z(s.type)?s.type:p[k],value:z(s.value)?s.value:r(u,f[k])},s.cells&&s.cells[k]&&K(!0,t,s.cells[k]),w.push(t);m.push({index:s.index,height:s.height,cells:w})}}e.rows=m,l=[].slice.call(b.worksheets),l.splice(b.worksheetIndex,0,e),h={created:b.created,author:b.author,worksheets:l},d="xml"==b.fileFormat?new q.ExcelXMLSpreadsheet(h):new q.OOXMLWorkbook(h),d.saveAs({fileName:b.fileName,forceExt:a.forceExt,proxy:a.proxy}),j.loading(!1)},b.readDataSource?c.read().always(i):i()},100)))},_doPdfExport:function(){var a,b,c,e,f,g,h,i,j,k=this,l=k.options;q&&(g=k.trigger(ga,{commandName:"exportPdf",cancel:!1,exportOptions:K(!0,{},l.exportOptions)}),g.cancel||(k.loading(!0,!0),setTimeout(function(){a=K(!0,{proxy:d,pdf:{fileName:"Untitled",author:d,created:new Date,size:"a4",orientation:"portrait",fontSize:10,dataSource:d,readDataSource:!1,columnFields:d,header:{enabled:!0,cells:d},margins:{left:72,top:72,bottom:72,right:72}}},g.exportOptions),b=a.pdf,e=b.columnFields,e||(e=k._getVisibleColumnFields()),f=e.length,b.header&&(j=!!b.header.enabled,b.header.cells&&(i=[].concat(b.header.cells))),z(j)||(j=!0),z(i)||(i=L(e,function(a){var b=k._getColumnByField(a);return{field:a,title:b.title||a,width:b.width||d}})),c=n.create(b.dataSource?b.dataSource:k.dataSource),h=function(){var d,e,f,g,h=c.view||[],l=h.length,m=[],n=b.margins;for(d=0;d<l;d++)e=h[d],f=k.trigger(ga,{commandName:"exportPdfRow",cancel:!1,item:e,index:d,row:{}}),f.cancel||m.push(K(!0,e,f.row));g=new q.PDFDocument({author:b.author,created:b.created}),g.addPage(b.size,b.orientation),g.table(n.left,n.top,m,i,{margins:n,printHeader:j,fontSize:b.fontSize}),g.saveAs({fileName:b.fileName,forceExt:a.forceExt,proxy:a.proxy}),k.loading(!1)},b.readDataSource?c.read().always(h):h()},100)))},_doCsvExport:function(){var a,b,c,e,f,g,h,i,j,k=this,l=k.options;q&&(g=k.trigger(ga,{commandName:"exportCsv",cancel:!1,exportOptions:K(!0,{},l.exportOptions)}),g.cancel||(k.loading(!0,!0),setTimeout(function(){a=K(!0,{proxy:d,csv:{fileName:"Untitled",delimiter:",",dataSource:d,readDataSource:!1,columnFields:d,header:{enabled:!0,cells:d}}},g.exportOptions),b=a.csv,e=b.columnFields,e||(e=k._getVisibleColumnFields()),f=e.length,b.header&&(j=!!b.header.enabled,b.header.cells&&(i=[].concat(b.header.cells))),z(j)||(j=!0),z(i)||(i=L(e,function(a){var b=k._getColumnByField(a);return{field:a,title:b.title||a}})),c=n.create(b.dataSource?b.dataSource:k.dataSource),h=function(){var d,e,f,g,h,l,m,n=c.view||[],o=n.length,p=i.length,s=[],t=[];for(j&&(s=L(i,function(a){return a.title})),d=0;d<o;d++)if(f=n[d],l=k.trigger(ga,{commandName:"exportCsvRow",cancel:!1,item:f,index:d,row:g}),!l.cancel){if(h=K(!0,{},l.row),h&&h.cells)g=h.cells;else for(g=[],e=0;e<p;e++)g.push(r(f,i[e].field));t.push(g)}m=new q.CSVDocument({delimiter:b.delimiter,printHeader:j,header:s,records:t}),m.saveAs({fileName:b.fileName,forceExt:a.forceExt,proxy:a.proxy}),k.loading(!1)},b.readDataSource?c.read().always(h):h()},100)))}});db.defaults=k,b.ui.plugin("Grid",db)}(jQuery,shield,this);