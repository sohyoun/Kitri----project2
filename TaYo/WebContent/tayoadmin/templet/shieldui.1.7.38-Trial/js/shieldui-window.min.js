/* Shield UI 1.7.38 Trial Version | Copyright 2013-2019 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(a,b,c,d){var e,f,g=b.ui.Widget,h=(b.Class,b.Constants,b.format),i=document,j=(a.extend,a.map,a.each,a.proxy),k=b.error,l=b.is["boolean"],m=b.is.object,n=b.is.defined,o=(b.is.integer,b.to["int"],b.to.number,b.support,"close"),p="minimize",q="maximize",r="resize",s="scroll",t="pin",u="overflow",v="hidden",w="px",x="center",y=function(b){return a("<div/>").text(b).html()};e={title:"",titleBarButtons:["pin","minimize","maximize","close"],content:d,cls:d,visible:!0,pinned:!1,modal:!1,width:400,height:300,resizable:{maxWidth:d,maxHeight:d,minWidth:200,minHeight:150},draggable:!0,position:d,appendToBody:!1,events:{}},f=g.extend({init:function(){g.fn.init.apply(this,arguments),n(this.initialOptions.titleBarButtons)&&(this.options.titleBarButtons=this.initialOptions.titleBarButtons);var c,d,e=this,f=e.options,o=f.cls,p=f.dieOnError,q=f.titleBarButtons,r=f.resizable,s=f.draggable,t=f.content,u=f.position,v=a(e.element),w=!1;return"div"!==a(v).prop("tagName").toLowerCase()?void k("shieldWindow: Underlying element is not DIV",p):q&&q.length>0&&!b.ui.Button?void k("shieldWindow: The titleBarButtons setting requires ShieldUI Button to be loaded",p):(e._eventNS="shieldWindow"+e.getInstanceId(),f.appendToBody?(v.appendTo(i.body),e._parentIsBody=!0):e._parentIsBody="body"==v.parent().prop("tagName").toLowerCase(),e._origHtml=v.html(),v.empty(),v.addClass("sui-window"+(o?" "+o:"")),v.css({width:f.width,height:f.height,position:"absolute"}),e.titleBarEl=c=a('<div class="sui-window-titlebar"><div class="sui-window-title">'+f.title+'</div><div class="sui-window-icons"></div></div>').appendTo(v),e._initTitleBarButtons(),e.contentEl=d=a('<div class="sui-window-content"></div>').appendTo(v),e._fixContent(),m(u)?v.css(u):w=!0,r&&(l(r)&&(r={}),e.resizable=new b.ui.Resizable(v,r),e.resizable.on("resized",j(e._fixContent,e))),s&&(l(s)&&(s={}),s.handle=e.titleBarEl,e.draggable=new b.ui.Draggable(v,s)),e._hasIframe=!1,t?t.template?t.template.dataUrl?a.ajax({url:t.template.dataUrl,dataType:"json",success:function(a,b,c){e.content(h(t.template.body,a)),e._focusFirst()},error:function(a,b,c){e.content("Error occured while reading URL: "+b+" - "+c)}}):(e.content(h(t.template.body,t.template.data)),e._focusFirst()):t.remote?t.remote.iframe?(e._hasIframe=!0,e.content('<iframe class="sui-window-iframe" src="'+t.remote.url+'" style="border:none; border-width:0px; width:100%; height:100%;"></iframe>'),e._focusFirst()):e.contentEl.load(t.remote.url,function(){e._focusFirst()}):(e.content(e._origHtml),e._focusFirst()):(e.content(e._origHtml),e._focusFirst()),e._minimized=!1,e._maximized=!1,e._destroyed=!1,v.attr("role","dialog").attr("aria-labelledby",y(f.title)),e.pinned(!!f.pinned),e.visible(!!f.visible),void(w&&e.center()))},_focusFirst:function(){var b=a(this.contentEl).find(".sui-checkbox:not(.sui-checkbox-disabled), .sui-radiobutton:not(.sui-radiobutton-disabled), .sui-input:not(.sui-input-disabled), .sui-combobox:not(.sui-combobox-disabled), .sui-dropdown:not(.sui-dropdown-disabled), .sui-listbox:not(.sui-listbox-disabled), .sui-switch:not(.sui-switch-disabled), a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible").first();a(b).length>0&&a(b).focus()},_initTitleBarButtons:function(){var b,c,d,e,f=this,g=f.options,h=g.titleBarButtons,i=g.modal;if(f.titleBarButtons={},h&&h.length>0){for(b=f.titleBarEl.find(".sui-window-icons"),e=0;e<h.length;e++)d=h[e],"pin"!==d&&"minimize"!==d&&"maximize"!==d&&"close"!==d||i&&"close"!==d||(c="pin"==d?"_onPin":"minimize"==d?"_onMinimize":"maximize"==d?"_onMaximize":d,f.titleBarButtons[d]=a('<button type="button"><div class="sui-sprite sui-window-button-icon sui-window-button-icon-'+d+'"></div></button>').appendTo(b).shieldButton({cls:"sui-window-button",events:{click:j(f[c],f,!0)}}).swidget());b.on("mousedown",function(a){return a.preventDefault(),a.stopPropagation(),!1})}},_destroyTitleBarButtons:function(){var a,b=this,c=b.titleBarButtons;for(a in c)c.hasOwnProperty(a)&&c[a].destroy();b.titleBarButtons={}},_createModal:function(){var b=this,d=a(b._parentIsBody?c:b.element.parent()),e=a(d).scrollTop(),f=a(d).scrollLeft();b._lockScroll(),b._modal=a('<div class="sui-window-modal"></div>').insertBefore(b.element).css({top:e,left:f})},_closeModal:function(){var b=this;a(b._modal).remove(),b._unlockScroll()},_lockScroll:function(){var b=this,c=b.element.parent();b._scrollTop=a(c).scrollTop(),b._scrollLeft=a(c).scrollLeft(),b._parentOverflow=a(c).css(u),c.css(u,v).scrollTop(b._scrollTop).scrollLeft(b._scrollLeft)},_unlockScroll:function(){var a=this,b=a.element.parent();b.css(u,a._parentOverflow).scrollTop(a._scrollTop).scrollLeft(a._scrollLeft)},_fixContent:function(){var b=this;a(b.contentEl).outerWidth(a(b.element).innerWidth()).innerHeight(a(b.element).innerHeight()-a(b.titleBarEl).outerHeight()),b._hasIframe&&a(b.contentEl).find(".sui-window-iframe").width(a(b.contentEl).width()).height(a(b.contentEl).height())},center:function(){var d=this,e=a(d.element);b.ui.Position.Set(e,d._parentIsBody?c:e.parent(),{source:x,target:x})},position:function(b){a(this.element).css(b)},getHeight:function(){a(this.element).css("height")},getWidth:function(){a(this.element).css("width")},getPosition:function(){var b=a(this.element);return{left:b.css("left"),top:b.css("top")}},content:function(){var b=this,c=a(b.contentEl),d=[].slice.call(arguments);return d.length>0?(c.empty(),void c.append(d[0])):c.html()},resize:function(b){a(this.element).css(b),this._fixContent()},_scroll:function(b){var d=this,e=a(d.element),f=d._parentIsBody;d._pinned&&e.css({left:d.originalPosition.left+a(f?c:e.parent()).scrollLeft()+w,top:d.originalPosition.top+a(f?c:e.parent()).scrollTop()+w})},_onPin:function(a){this.pinned(!this._pinned,a)},pinned:function(){var b,d,e=this,f=[].slice.call(arguments),g=a(e.element),h=e._parentIsBody,i=e.titleBarEl,k=i.find(".sui-window-button-icon-pin").length>0?i.find(".sui-window-button-icon-pin"):i.find(".sui-window-button-icon-unpin");return f.length<=0?e._pinned:(b=!!f[0],void(e._pinned!=b&&(f[1]&&(d=e.trigger(t,{pinned:b}),d.isDefaultPrevented())||(e._pinned=b,k.removeClass("sui-window-button-icon-pin sui-window-button-icon-unpin"),k.addClass(e._pinned?"sui-window-button-icon-pin":"sui-window-button-icon-unpin"),e._pinned?(e.originalPosition=g.position(),a(h?c:g.parent()).on(s+"."+e._eventNS,j(e._scroll,e)),e.draggable&&e.draggable.enabled(!1)):(a(h?c:g.parent()).off(s+"."+e._eventNS),e.origininalPosition=null,e.draggable&&e.draggable.enabled(!0))))))},_onMinimize:function(a){this.minimized(!0,a)},minimized:function(){var b,c,d,e=this,f=[].slice.call(arguments),g=a(e.element),h=a(e.contentEl),i=e.titleBarEl,j=e.titleBarButtons.minimize;return f.length<=0?e._minimized:(c=!!f[0],void(e._minimized!=c&&(f[1]&&(d=e.trigger(p,{minimized:c}),d.isDefaultPrevented())||(e._minimized=c,b=i.find(".sui-window-button-icon-minimize").length>0?i.find(".sui-window-button-icon-minimize"):i.find(".sui-window-button-icon-unminimize"),b.removeClass("sui-window-button-icon-minimize sui-window-button-icon-unminimize"),b.addClass(e._minimized?"sui-window-button-icon-unminimize":"sui-window-button-icon-minimize"),c?(e._onMinCurrHeight=g.height(),g.height(i.height()),h.hide(),e.resizable&&e.resizable.enabled(!1)):(g.height(e._onMinCurrHeight),h.show(),e.resizable&&e.resizable.enabled(!0)),j&&j.visible(!c)))))},_onMaximize:function(a){var b=this;b._minimized?b.minimized(!1,a):b.maximized(!b._maximized,a)},maximized:function(){var b,d,e,f,g=this,h=[].slice.call(arguments),i=a(g.element),k=g._beforeMaximize,l=a(g.titleBarEl);return h.length>0?(b=!!h[0],d=!!h[1],g._minimized&&g.minimized(!1,!1),g._maximized!=b&&(d&&(f=g.trigger(q,{maximized:b}),f.isDefaultPrevented())||(g._maximized=!!b,e=l.find(".sui-window-button-icon-maximize").length>0?l.find(".sui-window-button-icon-maximize"):l.find(".sui-window-button-icon-restore"),e.removeClass("sui-window-button-icon-maximize sui-window-button-icon-restore"),e.addClass(g._maximized?"sui-window-button-icon-restore":"sui-window-button-icon-maximize"),g._maximized?(g._beforeMaximize={top:i.css("top"),left:i.css("left"),width:i.width(),height:i.height()},g.resize({width:"100%",height:a(g._parentIsBody?c:i.parent()).height()}),g._lockScroll(),g.center(),g._parentIsBody&&a(c).on(r+"."+g._eventNS,j(g._onWinResizeMax,g))):(k&&(i.css({top:k.top,left:k.left}),g.resize({width:k.width,height:k.height})),g._unlockScroll(),g._parentIsBody&&(a(c).off(r+"."+g._eventNS),g._winResize=null)))),void 0):g._maximized},_onWinResizeMax:function(){var b=this;a(b.element).height(a(c).height()),b._fixContent()},close:function(a){var b,c=this;a&&(b=c.trigger(o),b.isDefaultPrevented())||c.destroy()},visible:function(){var a=this,b=[].slice.call(arguments);if(!a._destroyed)return b.length>0&&a.options.modal&&(b[0]?a._createModal():a._closeModal()),g.fn.visible.apply(a,arguments)},destroy:function(){var b=this,c=b.options.cls;b.visible(!1),b._destroyed=!0,b.resizable&&(b.resizable.destroy(),b.resizable=null),b.draggable&&(b.draggable.destroy(),b.draggable=null),b._destroyTitleBarButtons(),b.maximized(!1),b.pinned(!1),a(b.element).removeClass("sui-window"+(c?" "+c:"")),b._origHtml&&(a(b.element).html(b._origHtml),b._origHtml=null),g.fn.destroy.call(b)}}),f.defaults=e,b.ui.plugin("Window",f)}(jQuery,shield,this);