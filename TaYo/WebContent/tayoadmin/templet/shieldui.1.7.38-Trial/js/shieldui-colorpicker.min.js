/* Shield UI 1.7.38 Trial Version | Copyright 2013-2019 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(a,b,c,d){var e,f,g,h=b.ui.Widget,i=b.Class,j=document,k=b.is,l=(b.get,b.format,b.to["int"]),m=(Math.abs,a.each,a.proxy),n=(a.extend,a.map,k.undefined),o=c.opera,p=navigator.userAgent,q=/msie/i.test(p)&&!o,r=(q&&7===j.documentMode,"keydown"),s="click",t="mousedown",u="change",v="select",w="cancel",x="display",y="none",z=function(a){return k.string(a)?a.replace(/^\s+/,"").replace(/\s+$/,""):a};e={cls:d,palette:"basic",basicPalette:{columns:10,tileSize:{width:16,height:16},tileBorderWidth:0,palette:["#FFFFFF","#FFCCCC","#FFCC99","#FFFF99","#FFFFCC","#99FF99","#99FFFF","#CCFFFF","#CCCCFF","#FFCCFF","#CCCCCC","#FF6666","#FF9966","#FFFF66","#FFFF33","#66FF99","#33FFFF","#66FFFF","#9999FF","#FF99FF","#BBBBBB","#FF0000","#FF9900","#FFCC66","#FFFF00","#33FF33","#66CCCC","#33CCFF","#6666CC","#CC66CC","#999999","#CC0000","#FF6600","#FFCC33","#FFCC00","#33CC00","#00CCCC","#3366FF","#6633FF","#CC33CC","#666666","#990000","#CC6600","#CC9933","#999900","#009900","#339999","#3333FF","#6600CC","#993399","#333333","#660000","#993300","#996633","#666600","#006600","#336666","#000099","#333399","#663366","#000000","#330000","#663300","#663333","#333300","#003300","#003333","#000066","#330099","#330033"]},advancedPalette:{type:"hex",buttons:!0,messages:{apply:"Apply",cancel:"Cancel"}},displayInline:!1,showLetter:!1,value:d,valueTemplate:function(a){return a?a.hex?a.hex():a.toRGB().hex():null}},f=h.extend({init:function(b,c){h.fn.init.apply(this,arguments);var d,e=this,f=e.options,g=f.cls,i=k.defined(f.value)?f.value:e._value();if(arguments.length>1&&(c=arguments[1],c.basicPalette&&c.basicPalette.palette&&(f.basicPalette.palette=c.basicPalette.palette)),e.element.css(x,y),e._enabled=!0,e.currentColor=new A({color:i}),f.displayInline)e._buildPalette(),g&&e._picker.addClass(g);else{if(e._picker=d=a('<span class="sui-color-picker-dropdown" tabindex="0"><span class="sui-color-cell sui-unselectable" unselectable="on">&nbsp;</span><span class="sui-caret-container sui-unselectable" unselectable="on"><span class="sui-caret" unselectable="on"></span></span></span>').insertAfter(e.element),g&&e._picker.addClass(g),f.showLetter){var l=d.find(".sui-color-cell");a('<span class="sui-tool-letter">A<span class="sui-selected-color"></span></span>').appendTo(l),d.find(".sui-selected-color").css("background-color",e.currentColor.color.cssa())}else d.find(".sui-color-cell").css("background-color",e.currentColor.color.cssa());d.on(s,e._pickerClicked=m(e._pickerClickedHandler,e)),a(j).on(t+".shieldColorPicker"+e.getInstanceId(),m(e._hidePopup,e))}e.currentColor.color.cssa?e._oldColor=e.currentColor.color.cssa():e._oldColor=e.currentColor.color.toRGB().cssa(),e._changed()},hidePalette:function(){this._hidePopup({})},hide:function(){var b=this;b.options.displayInline?a(b.wrapperDiv).hide():(a(b._picker).hide(),b._hidePopup({}))},show:function(){var b=this;b.options.displayInline?a(b.wrapperDiv).hide():a(b._picker).show()},isVisible:function(){var b=this;return b.options.displayInline?a(b.wrapperDiv).is(":visible"):a(b._picker).is(":visible")},_changed:function(){var a=this;a._value(b.format.call(a,a.options.valueTemplate,a.currentColor.color))},_value:function(){return this.element.attr.apply(this.element,["value"].concat([].slice.call(arguments)))},_buildPalette:function(){var a=this;"basic"==a.options.palette?a._buildBasicPalette():(a._buildAdvancedPalette(),a._changeAdvancedPaletteColor())},_changeAdvancedPaletteColor:function(){var a=this,b=a.currentColor.color.toHSV();a.wrapperDiv&&(a._hue=b.hue,a._isHsl?(b=a.currentColor.color.toHSL(),a._XY(a,{pointer:a.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:b.hue,y:1-b.saturation}),a._Z(a,1-b.lightness,a.wrapperDiv.find(".sui-color-scale .pointer").get(0))):(a._XY(a,{pointer:a.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:b.saturation,y:1-b.value}),a._Z(a,b.hue,a.wrapperDiv.find(".sui-color-scale .pointer").get(0))))},_pickerClickedHandler:function(){var a=this;a.wrapperDiv||a._buildPalette(),a._showPopup()},_showPopup:function(){var b=this,d=b._picker.offset(),e=d.top-a(j).scrollTop(),f=b._picker.height(),g=a(c).height();if("advanced"===b.options.palette&&(b.currentColor.color.cssa?b._oldColor=b.currentColor.color.cssa():b._oldColor=b.currentColor.color.toRGB().cssa()),!b.wrapperDiv||b.wrapperDiv.css(x)==y){b._popupIsOver=!1;var h=d.top+f+1,i=d.left,k=b.wrapperDiv.height();g<k+e+f?h=d.top-k-1:h++,(h<0||a(j).scrollTop()>h)&&(h=d.top+f+1),d.top>h?b._popupIsOver=!0:b._popupIsOver=!1,b.wrapperDiv||this._buildPalette(),b._popupIsOver?(b.wrapperDiv.css({position:"absolute",zIndex:10002,top:h+k,left:i,height:0,display:""}),b.wrapperDiv.animate({height:k,top:h},150)):(b.wrapperDiv.css({position:"absolute",zIndex:10002,top:h-1,left:i}),b.wrapperDiv.slideDown(150,function(){}))}},_hidePopup:function(b){var c,d=this,e=d.options,f=a(b.target);if(("basic"==e.palette||!(f.hasClass("sui-colorpicker")||f.parents(".sui-colorpicker").length>0))&&d.wrapperDiv&&d.wrapperDiv.css(x)!=y){if("basic"===e.palette){var g=d._picker.find(".sui-tool-letter > .sui-selected-color");0===g.length&&(g=d._picker.find(".sui-color-cell")),g.css("background-color",d.currentColor.color.css())}d._popupIsOver?(c=d.wrapperDiv.height(),d.wrapperDiv.animate({height:0,top:d._picker.offset().top},150,function(){a(this).css(x,y).css("height",c)})):d.wrapperDiv.slideUp(150,function(){});var h;h=d.currentColor.color.cssa?d.currentColor.color.cssa():d.currentColor.color.toRGB().cssa(),"basic"!=e.palette&&(e.advancedPalette.buttons?h!==d._oldColor?(d.currentColor=new A({color:d._oldColor}),setTimeout(function(){d._update(),d.trigger(w)},200)):d._changed():(d._changeSelectedColorCell(),d._changed(),d.trigger(u)))}},_buildBasicPalette:function(){var b,c=this,d=c.options,e=d.basicPalette,f=e.palette,g=e.tileSize,h=0,i=a("<div class='sui-colorpicker sui-colorpicker-basic-palette'/>");b=d.displayInline?i.insertAfter(c.element):i.appendTo(j.body).css(x,y);for(var k=0;k<f.length;k++)a("<div class='sui-palette-tile'/>").css({backgroundColor:f[k],width:g.width,height:g.height,borderWidth:e.tileBorderWidth,margin:"0 "+e.tileBorderWidth+"px "+e.tileBorderWidth+"px 0"}).on(t,c._tileClicked=m(c._tileClickedHandler,c)).appendTo(b).addClass(c.currentColor.color.hex().toUpperCase()==f[k].toUpperCase()?"sui-palette-tile-selected":"");h=e.columns*l(g.width)+e.columns*e.tileBorderWidth,b.css("width",h+"px"),c.wrapperDiv=b},_tileClickedHandler:function(b){var c=this;if(c._enabled){c.wrapperDiv.find(".sui-palette-tile-selected").removeClass("sui-palette-tile-selected"),a(b.target).addClass("sui-palette-tile-selected");var d=a(b.target).css("background-color");c.currentColor=new A({color:d}),c.trigger(v),c._changed()}},_buildAdvancedPalette:function(){var c,d,e,f=this,h=f.options;e=h.displayInline?a("<div/>").insertAfter(f.element).addClass("sui-colorpicker"):a("<div/>").appendTo(j.body).addClass("sui-colorpicker").css(x,y),f.wrapperDiv=e,d=a("<div class='sui-hex-wrapper'/>").appendTo(e),f.colorDiv=a("<div class='sui-color-div'/>").appendTo(d),"hsl"==h.advancedPalette.type?f.colorInput=a("<input class='sui-alpha-input'/>").appendTo(d):f.colorInput=a("<input class='sui-hex-input'/>").appendTo(d),f.colorInput.on(r,f._colorInputKeyDown=m(f._colorInputKeyDownHandler,f));var i="<div class='sui-color-palette'><div class='pointer'><div class='shape shape1'></div><div class='shape shape2'></div></div><div class='bg bg1'></div><div class='bg bg2'></div></div><div class='sui-color-scale'><div class='pointer'><div class='shape'></div></div><div class='bg'></div></div>";a(i).appendTo(e);var k=new g({twod:e.find(".sui-color-palette").get(0),pointer:e.find(".sui-color-palette .pointer").get(0),oned:e.find(".sui-color-scale").get(0),isXYslider:!0,cbs:{begin:f._changeXY,change:f._changeXY,end:f._done}},f);f.xy=k;var l=new g({twod:e.find(".sui-color-palette").get(0),pointer:e.find(".sui-color-scale .pointer").get(0),oned:e.find(".sui-color-scale").get(0),isXYslider:!1,cbs:{begin:f._changeZ,change:f._changeZ,end:f._done}},f);if(f.z=l,"rgb"==h.advancedPalette.type){c="<div class='extras'/>";var n=a(c).appendTo(e);a("<span class='sui-r-text'>R:</span>").appendTo(n),f.rInput=a("<input class='sui-r-input'/>").appendTo(n),f._rInputKeyDown=m(f._rInputKeyDownHandler,f),a("<span class='sui-g-text'>G:</span>").appendTo(n),f.gInput=a("<input class='sui-g-input'/>").appendTo(n),f._gInputKeyDown=m(f._gInputKeyDownHandler,f),a("<span class='sui-b-text'>B:</span>").appendTo(n),f.bInput=a("<input class='sui-b-input'/>").appendTo(n),f._bInputKeyDown=m(f._bInputKeyDownHandler,f),b.ui.NumericTextBox&&(f.rInput=new b.ui.NumericTextBox(f.rInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:f._rInputKeyDown}}),f.gInput=new b.ui.NumericTextBox(f.gInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:f._gInputKeyDown}}),f.bInput=new b.ui.NumericTextBox(f.bInput,{min:0,max:255,step:.01,spinners:!1,cls:"rgbInputs",events:{change:f._bInputKeyDown}}))}if("hsl"==h.advancedPalette.type){f._isHsl=!0,c="<div class='sui-transparent-slider'><div class='sui-color-scale alpha'><div class='pointer' style='top: 0%;'><div class='shape'></div></div><div class='bg'></div></div></div>",e.addClass("sui-hsl"),a(c).appendTo(e);var o=new g({twod:e.find(".alpha").get(0),pointer:e.find(".alpha .pointer").get(0),oned:e.find(".alpha").get(0),isXYslider:!1,cbs:{begin:f._changeA,change:f._changeA,end:f._done}},f);f.a=o}h.advancedPalette.buttons&&f._buildButtons()},_buildButtons:function(){var c=this,d=this.options.advancedPalette.messages,e=a("<div class='sui-buttons-wrapper'/>").appendTo(this.wrapperDiv);if(b.ui.Button){var f=a("<button type='button'>"+d.apply+"</button>").appendTo(e),g=new b.ui.Button(f,{cls:"sui-apply",events:{click:m(c._applyHandler,this)}});c._applyButton=g;var h=a("<button type='button'>"+d.cancel+"</button>").appendTo(e),i=new b.ui.Button(h,{cls:"sui-cancel",events:{click:m(c._cancelHandler,this)}});c._cancelButton=i}},_applyHandler:function(a){var b=this;b.currentColor.color.cssa?b._oldColor=b.currentColor.color.cssa():b._oldColor=b.currentColor.color.toRGB().cssa(),b._changeSelectedColorCell(),b.options.displayInline||b._hidePopup(a),b._changed(),b.trigger(u)},_changeSelectedColorCell:function(){var a,b=this,c=b.options,d=b._picker;a=b.currentColor.color.cssa?b.currentColor.color.cssa():b.currentColor.color.toRGB().cssa(),c.displayInline||(c.showLetter?d.find(".sui-selected-color").css("background-color",a):d.find(".sui-color-cell").css("background-color",a))},_cancelHandler:function(a){var b=this;b.options.displayInline?(b.currentColor=new A({color:b._oldColor}),setTimeout(function(){b._update(),b.trigger(w)},200)):b._hidePopup(a)},_update:function(){var a,b=this,c=b._shouldUpdateMainInput,d=b._shouldUpdateRgbInputs;b._isHsl?(a=b.currentColor.color.toHSL(),b._XY(b,{pointer:b.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:a.hue,y:1-a.saturation}),b._shouldUpdateMainInput=c,b._Z(b,1-a.lightness,b.wrapperDiv.find(".sui-color-scale .pointer").get(0)),b.Y(b.wrapperDiv.find(".alpha .pointer").get(0),(1-a.alpha).toFixed(2))):(a=b.currentColor.color.toHSV(),b._XY(b,{pointer:b.wrapperDiv.find(".sui-color-palette .pointer").get(0),x:a.saturation,y:1-a.value}),b._shouldUpdateMainInput=c,b._shouldUpdateRgbInputs=d,b._Z(b,a.hue,b.wrapperDiv.find(".sui-color-scale .pointer").get(0)))},_rInputKeyDownHandler:function(a){var b=this;setTimeout(function(){var c=a.value;b.currentColor.color.red=parseFloat(c)/255,b._shouldUpdateRgbInputs=!1,b._update(),b.trigger(v)},1)},_gInputKeyDownHandler:function(a){var b=this;setTimeout(function(){var c=a.value;b.currentColor.color.green=parseFloat(c)/255,b._shouldUpdateRgbInputs=!1,b._update(),b.trigger(v)},1)},_bInputKeyDownHandler:function(a){var b=this;setTimeout(function(){var c=a.value;b.currentColor.color.blue=parseFloat(c)/255,b._shouldUpdateRgbInputs=!1,b._update(),b.trigger(v)},1)},_colorInputKeyDownHandler:function(a){var b=this;a.ctrlKey||setTimeout(function(){var c=a.currentTarget,d=c.value,e=b.currentColor;b.currentColor=new A({color:d}),k.object(b.currentColor.color)?(b._shouldUpdateRgbInputs=!0,b._shouldUpdateMainInput=!1,b._update()):b.currentColor=e,b.trigger(v)},1)},_changeA:function(a,b){if(a.colorPicker._enabled){a.colorPicker.colorInput.val("rgba(0,0,0,1)");a.colorPicker._A(a.colorPicker,a.colorPicker.clamp(b.y,0,1),a.colorPicker.a.pointer)}},_changeZ:function(a,b){if(a.colorPicker._enabled){a.colorPicker._isHsl?a.colorPicker.colorInput.val("rgba(0,0,0,1)"):a.colorPicker.colorInput.val("#000000");a.colorPicker._Z(a.colorPicker,a.colorPicker.clamp(b.y,0,1),a.colorPicker.z.pointer);a.colorPicker.trigger(v)}},_changeXY:function(a,b){if(a.colorPicker._enabled){a.colorPicker._isHsl?a.colorPicker.colorInput.val("rgba(0,0,0,1)"):a.colorPicker.colorInput.val("#000000");a.colorPicker._XY(a.colorPicker,{x:a.colorPicker.clamp(b.x,0,1),y:a.colorPicker.clamp(b.y,0,1),pointer:b.pointer},a.colorPicker.xy);a.colorPicker.X(b.pointer,b.x),a.colorPicker.Y(b.pointer,b.y),a.colorPicker.trigger(v)}},_XY:function(a,b){var c,d=this;if(a._enabled){if(a.X(b.pointer,b.x),a.Y(b.pointer,b.y),d._isHsl){c=a.currentColor.color.toHSL?a.currentColor.color.toHSL():a.currentColor.color,c.hue=b.x,c.saturation=1-b.y;var e=c.lightness;c.lightness=.5,d.wrapperDiv.find(".sui-color-scale").css("background-color",c.toRGB().cssa()),c.lightness=e}else c=a.currentColor.color.toHSV(),b.x>1&&(b.x=1),b.x<0&&(b.x=0),b.y<0&&(b.y=0),b.y>1&&(b.y=1),c.saturation=b.x,c.value=1-b.y,0===c.hue&&(c.hue=d._hue);var f=c.toRGB(),g=a.colorInput.val();g!=f.hex()&&(d._shouldUpdateMainInput?(g.length>4||0===g.length)&&(d._isHsl?a.colorInput.val(f.cssa()):a.colorInput.val(f.hex())):d._shouldUpdateMainInput=!0),a.rInput&&(d._shouldUpdateRgbInputs?(a.rInput.value((255*f.red).toFixed(2)),a.gInput.value((255*f.green).toFixed(2)),a.bInput.value((255*f.blue).toFixed(2))):d._shouldUpdateRgbInputs=!0),a.colorDiv.get(0).style.background=f.cssa(),a.currentColor.color=f}},_Z:function(a,b,c){var d,e=this,f=a.colorInput.val();if(e._isHsl)d=a.currentColor.color.toHSL?a.currentColor.color.toHSL():a.currentColor.color,a.Y(c,b),d.lightness=1-b,a.colorDiv.get(0).style.background=d.toRGB().cssa(),a.currentColor.color=d,f!=d.toRGB().hex()&&(e._shouldUpdateMainInput?(f.length>4||0===f.length)&&(e._isHsl?a.colorInput.val(d.toRGB().cssa()):a.colorInput.val(d.toRGB().hex())):e._shouldUpdateMainInput=!0);else{d=a.currentColor.color.toHSV(),a.Y(c,b),a._rgbBg(a,a.wrapperDiv.find(".sui-color-palette").get(0),b),e._hue=d.hue=b;var g=d.toRGB();f!=g.hex()&&(f.length>4||0===f.length)&&(e._isHsl?a.colorInput.val(g.cssa()):a.colorInput.val(g.hex())),a.rInput&&(e._shouldUpdateRgbInputs?(a.rInput.value((255*g.red).toFixed(2)),a.gInput.value((255*g.green).toFixed(2)),a.bInput.value((255*g.blue).toFixed(2))):e._shouldUpdateRgbInputs=!0),a.colorDiv.get(0).style.background=g.cssa(),a.currentColor.color=g}},_A:function(a,b,c){var d,e=this,f=a.colorInput.val();d=a.currentColor.color.toHSL?a.currentColor.color.toHSL():a.currentColor.color,a.Y(c,b),d.alpha=(1-b).toFixed(2),a.colorDiv.get(0).style.background=d.toRGB().cssa(),a.currentColor.color=d,f!=d.toRGB().hex()&&(e._shouldUpdateMainInput?(f.length>4||0===f.length)&&(a.colorInput.val(d.toRGB().cssa()),e.trigger(v)):e._shouldUpdateMainInput=!0)},_rgbBg:function(a,b,c){var d=new A({}).HSV(c,1,1).toRGB().cssa();a.BG(b,d)},clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},X:function(a,b){a.style.left=this.clamp(100*b,0,100)+"%"},Y:function(a,b){a.style.top=this.clamp(100*b,0,100)+"%"},BG:function(a,b){a.style.background=b},_done:function(){},enabled:function(){var a,b=this,c=(b.options,[].slice.call(arguments));return c.length>0?(a=c[0],a?(b._picker&&b._picker.removeClass("sui-colorpicker-disabled"),b.wrapperDiv&&b.wrapperDiv.removeClass("sui-colorpicker-disabled")):(b._picker&&b._picker.addClass("sui-colorpicker-disabled"),b.wrapperDiv&&b.wrapperDiv.addClass("sui-colorpicker-disabled")),b._applyButton&&b._applyButton.enabled(a),b._cancelButton&&b._cancelButton.enabled(a),a?(b.colorInput&&b.colorInput.removeAttr("readonly"),b.rInput&&(b.rInput.enable(!0),b.gInput.enable(!0),b.bInput.enable(!0))):(b.colorInput&&b.colorInput.attr("readonly","readonly"),b.rInput&&(b.rInput.enable(!1),b.gInput.enable(!1),b.bInput.enable(!1))),b._enabled=a,void 0):b._enabled},value:function(){var b,c=this,d=c.options,e=[].slice.call(arguments);if(!(e.length>0))return b=c.currentColor.color,b.css||(b=b.toRGB()),b;if(b=e[0],c.currentColor=new A({color:b}),"basic"==d.palette){var f=c.currentColor.color.css();if(c.wrapperDiv)for(var g=c.wrapperDiv.find(".sui-palette-tile"),h=0;h<g.length;h++)g[h].style.backgroundColor.replace(/\s+/g,"")===f.replace(/\s+/g,"")&&(g.removeClass("sui-palette-tile-selected"),a(g[h]).addClass("sui-palette-tile-selected"))}else c._changeAdvancedPaletteColor();if(!d.displayInline)if(d.showLetter){c._picker.find(".sui-color-cell");c._picker.find(".sui-selected-color").css("background-color",c.currentColor.color.cssa())}else c._picker.find(".sui-color-cell").css("background-color",c.currentColor.color.cssa());c._changed()},destroy:function(){var b=this;b.element.show(),b.wrapperDiv.remove(),b.colorInput&&b.colorInput.off(r,b._colorInputKeyDown),b.rInput&&(b.rInput.destroy(),b.gInput.destroy(),b.bInput.destroy()),b.options.displayInline&&"basic"==b.options.palette&&(b.wrapperDiv.find(".sui-palette-tile").off(s,b._tileClicked),b.wrapperDiv.remove()),b._applyButton&&b._applyButton.destroy(),b._cancelButton&&b._cancelButton.destroy(),a(j).off(t+".shieldColorPicker"+b.getInstanceId()),b._tileClicked=b._rInputKeyDown=b._gInputKeyDown=b._bInputKeyDown=b._hidePopupDelegate=b._picker=b._applyButton=b._cancelButton=b._isHsl=b.currentColor=b.wrapperDiv=b.colorInput=b.colorDiv=b.rInput=b.gInput=b._enabled=b._popupIsOver=b.bInput=null,h.fn.destroy.call(b)}}),g=i.extend({init:function(a,b){var c=this,d=a.isXYslider,e=a.cbs,f=a.twod,g=a.pointer,h=a.oned;return c.colorPicker=b,d?(c.drag(f,c.attachPointer(c,e,g)),{background:f,pointer:g}):(c.drag(h,c.attachPointer(c,e,g)),{background:h,pointer:g})},drag:function(a,b){return a?void(this.isTouch()?this.dragTemplate(a,b,"touchstart","touchmove","touchend"):this.dragTemplate(a,b,"mousedown","mousemove","mouseup")):void console.warn("drag is missing elem!")},attachPointer:function(a,b,c){function d(a){return function(b,d){d.pointer=c,a(b,d)}}var e={};for(var f in b)b.hasOwnProperty(f)&&(e[f]=d(b[f]));return e},isTouch:function(){return"undefined"!=typeof c.ontouchstart},dragTemplate:function(a,b,c,d,e){var f=this,g=!1;b=f.getCbs(b);var h=b.begin,i=b.change,k=b.end;f.on(a,c,function(b){function c(){g=!1,f.off(j,d,l),f.off(j,e,c),f.callCb(k,a,b)}g=!0;var l=f.partial(f,f.callCb,i,a);f.on(j,d,l),f.on(j,e,c),f.callCb(h,a,b)})},on:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},off:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},getCbs:function(a){if(a)return{begin:a.begin||function(){},change:a.change||function(){},end:a.end||function(){}};var b,c;return{begin:function(a){b={x:a.elem.offsetLeft,y:a.elem.offsetTop},c=a.cursor},change:function(a){a.elem.style.left=b.x+a.cursor.x-c.x+"px",a.elem.style.top=b.y+a.cursor.y-c.y+"px"},end:function(){}}},callCb:function(b,c,d){var e=this;d.preventDefault();var f=a(c).offset(),g=c.clientWidth,h=c.clientHeight,i={x:e.cursorX(c,d),y:e.cursorY(c,d)},j=(i.x-f.left)/g,k=(i.y-f.top)/h;b(this,{x:isNaN(j)?0:j,y:isNaN(k)?0:k,cursor:i,elem:c,e:d})},partial:function(a,b){var c=Array.prototype.slice,d=c.apply(arguments,[2]),e=this;return function(){return b.apply(e,d.concat(c.apply(arguments)))}},cursorX:function(a,b){var d=this;if(d.isFixed(a)){var e=parseInt(d.getStyle(j.body,"marginLeft"),10)-d.calc(a,"scrollLeft")+c.pageXOffset+a.style.marginLeft;return b.clientX-e}return b.pageX?b.pageX:b.clientX?b.clientX+j.body.scrollLeft:void 0},cursorY:function(a,b){var d=this;if(d.isFixed(a)){var e=parseInt(d.getStyle(j.body,"marginTop"),10)-d.calc(a,"scrollTop")+c.pageYOffset+a.style.marginTop;return b.clientY-e}return b.pageY?b.pageY:b.clientY?b.clientY+j.body.scrollTop:void 0},calc:function(a,b){for(var c=0;"HTML"!=a.nodeName;)c+=a[b],a=a.parentNode;return c},isFixed:function(a){for(;"HTML"!=a.nodeName&&"fixed"!=this.usedStyle(a,"position");)a=a.parentNode;return"HTML"!=a.nodeName},getStyle:function(a,b){return a.currentStyle?a.currentStyle[b]:j.defaultView&&j.defaultView.getComputedStyle?j.defaultView.getComputedStyle(a,"")[b]:a.style[b]},usedStyle:function(a,b){var d;return d=c.getComputedStyle?c.getComputedStyle(a,null):a.currentStyle,d[b]}});var A=i.extend({init:function(a){var b=this,c=a.color;if(n(c)||null===c||""===z(c))b.color=b.getColor("#000");else if(k.integer(c)){var d=c+0,e=[(16711680&d)>>16,(65280&d)>>8,255&d];b.color=b.getColor("rgb("+e[2]+","+e[1]+","+e[0]+")")}else b.color=b.getColor(c)},getColor:function(a){var b,c,d,e=this,f=/\s*(\.\d+|\d+(?:\.\d+)?)(%)?\s*/,g=/\s*(\.\d+|\d+(?:\.\d+)?)\s*/,h=new RegExp("^(rgb|hsl|hsv)a?\\("+f.source+","+f.source+","+f.source+"(?:,"+g.source+")?\\)$","i");if(b=a.toLowerCase(),"transparent"===b&&(a="rgba(0,0,0,0)"),c=a.match(h)){var i=c[1].toUpperCase(),j=n(c[8])?c[8]:parseFloat(c[8]),k="H"===i[0],l=c[3]?100:k?360:255,m=c[5]||k?100:255,o=c[7]||k?100:255;return e[i](parseFloat(c[2])/l,parseFloat(c[4])/m,parseFloat(c[6])/o,j)}return a.length<6&&(a=a.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3")),d=a.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i),d?e.RGB(parseInt(d[1],16)/255,parseInt(d[2],16)/255,parseInt(d[3],16)/255):a},RGB:function(a,b,c,d){var e=this;return{red:a,green:b,blue:c,alpha:n(d)?1:d,hex:function(){var a=(65536*Math.round(255*this.red)+256*Math.round(255*this.green)+Math.round(255*this.blue)).toString(16);return"#"+"00000".substr(0,6-a.length)+a},hexa:function(){var a=Math.round(255*this.alpha).toString(16);return"#"+"00".substr(0,2-a.length)+a+this.hex().substr(1,6)},css:function(){return"rgb("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+")"},cssa:function(){return"rgba("+Math.round(255*this.red)+","+Math.round(255*this.green)+","+Math.round(255*this.blue)+","+this.alpha+")"},toHSV:function(){var a,b=this.red,c=this.green,f=this.blue,g=Math.max(b,c,f),h=Math.min(b,c,f),i=g-h,j=0===g?0:i/g,k=g;if(0===i)a=0;else switch(g){case b:a=(c-f)/i/6+(c<f?1:0);break;case c:a=(f-b)/i/6+1/3;break;case f:a=(b-c)/i/6+2/3}return e.HSV(a,j,k,d)},toHSL:function(){var a=this.toHSV();return e.HSV(a.hue,a.saturation,a.value,a.alpha).toHSL()},toCMYK:function(){var a=this.red,b=this.green,c=this.blue,f=1-a,g=1-b,h=1-c,i=1;return a||b||c?(i=Math.min(f,Math.min(g,h)),f=(f-i)/(1-i),g=(g-i)/(1-i),h=(h-i)/(1-i)):i=1,e.CMYK(f,g,h,i,d)}}},HSV:function(a,b,c,d){var e=this;return{hue:a,saturation:b,value:c,alpha:n(d)?1:d,toRGB:function(){var a,b,c,f=this.hue,g=this.saturation,h=this.value,i=Math.min(5,Math.floor(6*f)),j=6*f-i,k=h*(1-g),l=h*(1-j*g),m=h*(1-(1-j)*g);switch(i){case 0:a=h,b=m,c=k;break;case 1:a=l,b=h,c=k;break;case 2:a=k,b=h,c=m;break;case 3:a=k,b=l,c=h;break;case 4:a=m,b=k,c=h;break;case 5:a=h,b=k,c=l}return e.RGB(a,b,c,d)},toHSL:function(){var a,b=(2-this.saturation)*this.value,c=this.saturation*this.value,d=b<=1?b:2-b;return a=d<1e-9?0:c/d,e.HSL(this.hue,a,b/2,this.alpha)}}},HSL:function(a,b,c,d){var e=this;return{hue:a,saturation:b,lightness:c,alpha:n(d)?1:d,toHSV:function(){var a,b=2*this.lightness,c=this.saturation*(b<=1?b:2-b);return a=b+c<1e-9?0:2*c/(b+c),e.HSV(this.hue,a,(b+c)/2,this.alpha)},toRGB:function(){return this.toHSV().toRGB()}}},CMYK:function(a,b,c,d,e){var f=this;return{cyan:a,magenta:b,yellow:c,black:d,alpha:n(e)?1:e,toRGB:function(){return f.RGB(1-this.cyan*(1-this.black)-this.black,1-this.magenta*(1-this.black)-this.black,1-this.yellow*(1-this.black)-this.black,this.alpha)}}},destroy:function(){this.color=null}});f.defaults=e,b.ui.plugin("ColorPicker",f),b.ui.ColorPicker=f}(jQuery,shield,this);